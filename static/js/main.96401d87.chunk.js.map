{"version":3,"sources":["common/constants/window-names.js","actions/types.js","common/services/launch-source-service.js","actions/group.js","common/services/data-persistence-service.js","common/services/windows-service.js","common/services/running-game-service.js","common/constants/hotkeys-ids.js","common/services/hotkeys-service.js","common/services/gep-service.js","common/services/event-bus.js","common/services/overwolfplugin.js","common/services/coord-service.js","reducers/GameReducer.js","reducers/GroupReducer.js","reducers/index.js","windows/background/BackgroundController.js","components/LocationSharingController.js","windows/background/Background.jsx","common/services/drag-service.js","components/Filters.js","components/ButtonTooltip.js","components/EventStatus.js","windows/settings/Settings.jsx","common/constants/colours.js","components/MiniMap.js","windows/in-game/InGame.jsx","windows/desktop/Desktop.jsx","components/AdBox.js","components/StreamLocation.js","windows/second_screen/SecondScreen.jsx","windows/notification/Notification.jsx","App.js","serviceWorker.js","index.js"],"names":["WindowNames","BACKGROUND","SETTINGS","IN_GAME","DESKTOP","SECOND_SCREEN","IN_GAME_FULL","NOTIFICATION","COORDS","SHOWHIDE_HOTKEY","SHOWHIDE2_HOTKEY","ZOOM_IN_HOTKEY","ZOOM_OUT_HOTKEY","LOCATIONSTREAM_HOTKEY","ERROR","SHAPE","ENABLED_MARKERS","OPACITY","AUTO_HIDE","ROTATION","SECOND_MONITOR","GAME_INFO","TRACK_PLAYER","AUTO_FOLLOW","_launchSource","name","regex","results","replace","RegExp","exec","window","location","search","decodeURIComponent","_getUrlParameterByName","getLaunchSource","types","recoverOnStartUp","store","overwolf","windows","getMainWindow","reduxStore","localStorage","getItem","setItem","NWMM_shape","dispatch","type","payload","NWMM_opacity","parseFloat","NWMM_auto_hide","NWMM_rotation","last_coords","NWMM_last_coords","console","log","endsWith","JSON","parse","NWMM_markers","checked_list","node","Nodes","value","forEach","item","item2","push","NWMM_monitor_mode","WindowsService","getMonitorInfo","NWMM_groupCode","group","NWMM_auto_follow","saveOnShutdown","current_state","getState","game","coords","groupCode","_obtainWindow","Promise","resolve","reject","obtainDeclaredWindow","response","status","a","LaunchSourceService","RunningGameService","isGameRunning","restore","result","dragMove","getCurrentWindow","id","minimize","getStartupWindowName","toggle_ingame","res","success","getWindowState","res2","window_state_ex","hide","toggleMap","second_monitor","bringToFront","res3","QuitApp","DataPersistenceService","close","utils","getMonitorsList","monitors","displays","length","swapMap","from_ingame","res4","openBrowser","code","url","openUrlInDefaultBrowser","_gameRunningChangedListeners","_onGameInfoUpdated","event","gameRunning","runningChanged","gameChanged","gameInfo","isRunning","classId","listener","gameOverlayChanged","reason","includes","auto_hide","overlayInfo","isCursorVisible","_isGameRunning","games","getRunningGameInfo","runningGameInfo","onGameInfoUpdated","removeListener","addListener","addGameRunningChangedListener","callback","HotkeyIds","SHOW_HIDE","ZOOM_IN","ZOOM_OUT","_getHotkey","hotkeyId","settings","getHotKey","hotkey","setTimeout","getShowHideHotkey","HOTKEYS","TAKE_SCREENSHOT","getZoomInHotkey","TOGGLE","getZoomOutHotkey","setTakeScreenshotHotkey","action","registerHotKey","error","_setHotkey","addHotkeyChangeListener","OnHotKeyChanged","HotkeyStartup","hotkeys","get","isUnassigned","binding","onPressed","source","_listeners","eventHandler","trigger","eventName","data","OverwolfPlugin","extraObjectNameInManifest","addNameToObject","_pluginInstance","_extraObjectName","_addNameToObject","this","initialize","proxy","extensions","current","getExtraObject","e","stringify","object","_PluginName_","_initialize","initialized","plugin","PlayerNameuuid","uuidv4","running","CoordService","initPlugin","before","Date","now","getCoords","r","after","duration","delay","Math","max","pluginInitAsync","RunServer","overwolfEventGetInfoFn","events","getInfo","mapName","game_info","map","playerName","player_name","worldName","world_name","position_string","split","position_x","position_y","rotation_string","rotation","msg","position","Broadcast","c","INITIAL_STATE","showhide","zoom_in","zoom_out","showhide2","locationstream","circle","enabled_markers","opacity","compass_mode","supporter","in_game","tracked_player","auto_follow","connectedPlayers","rootReducer","combineReducers","state","auto_follow_buffer","remainingConnectedPlayers","createStore","reducers","compose","applyMiddleware","ReduxThunk","BackgroundController","ow_eventBus","EventBus","_registerAppLaunchTriggerHandler","HotkeysService","startScreenshotWorker","onAppLaunchTriggered","_onAppRelaunch","LocationSharingController","ws","prevProps","prevState","props","resetWebsocket","broadcastPosition","WebSocket","onmessage","playerId","recvMsgPositionUpdate","recvMsgPlayerDisconnect","onopen","onclose","onerror","message","readyState","send","React","Component","mapDispatchToProps","connect","Background","run","className","DragService","currentWindow","element","initialMousePosition","isMouseDown","addEventListener","onDragStart","bind","onMouseMove","x","clientX","y","clientY","diffX","abs","diffY","_isSignificantMouseMove","NodeImages","FilterItem","toggle_filter_item","add","disabled","enabled","modify_enabled","checkboxfill","style","height","width","onClick","src","image_name","label","Node","setExpanded","setState","expanded","toggle_node","disabled2","children","child","child2","expandcontent","enabled_values","enabled_string","img","image_src","classNames","Collapse","in","Filters","list","new_enabled","concat","filter","el","updateEnabled","componentDidMount","setEnabled","enabled_list","componentDidUpdate","node_list","total","flexDirection","textAlign","fontSize","marginRight","ButtonTooltip","styled","Tooltip","arrow","classes","popper","theme","tooltipClasses","color","tooltip","backgroundColor","service_colors","service_message","EventStatus","axios","then","bad_events","features","feature","details","title","placement","boxShadow","SettingsTabs","Tabs","SettingsTab","Tab","padding","margin","fontFamily","outline","borderColor","AutoFollowMarks","QuitButton","Button","border","lineHeight","transition","CssTextField","TextField","borderBottomColor","OpacityMarks","SizeMarks","Settings","shouldComponentUpdate","nextProps","nextState","update","openURL","openUrlInOverwolfBrowser","onCloseClicked","second_screen","toggle_settings","SizeUpdate","default_size","OpacityUpdate","default_opacity","OpacityChange","AutoFollowChange","handleShapeChange","target","SizeChange","change_size_params","round","changeSize","custom_size","CustomSizeEnter","key","quitApp","togglemarkers","toggle","ZoomChange","TownZoom","WorldZoom","handleRotation","checked","handleAutoHide","handleTabChange","current_tab","_dragService","_headerRef","createRef","showhideText","zoomInText","zoomOutText","version","parseInt","getManifest","app","meta","custom_size_row","keyPress","Box","component","sx","noValidate","autoComplete","variant","size","onKeyPress","ev","preventDefault","changeOpacity","updateOpacity","Frequency","minimap_settings","Slider","defaultValue","step","marks","min","onChangeCommitted","onChange","defaultChecked","FormControl","RadioGroup","row","FormControlLabel","control","Radio","main_map_settings","hotkey_settings","textDecoration","href","about","marginBottom","marginTop","getFullYear","tab_content","flex","minHeight","ref","draggable","PlayerColours","WORLD_ZOOM_TYPE","CITY_ZOOM_TYPE","FULLSCREEN_ZOOM_TYPE","y_scale","y_offset","x_scale","x_offset","iconStyles","getIconScale","baseZoom","imageSrc","startsWith","updateIconScales","zoom","Object","keys","base_scale","scale","getImage","getSrc","setScale","imgSrc","Style","image","Icon","anchor","anchorXUnits","anchorYUnits","initIconStyles","city_boundaries","CK","y_min","y_max","x_min","x_max","FL","WW","EF","MB","RW","RS","MD","WF","BW","ER","VH","LS","EB","CP","MH","MR","MiniMap","errors","updateMarkers","updatePosition","trackedPlayer","new_coords","tracking","updateView","prevPosition","document","getElementById","transform","String","getView","animate","toggleShape","onMapViewChangeEnd_prevZoom","onMapViewChangeEnd","getZoom","isMouseWheelZoomIncr","isMouseWheelZoomDecr","setZoom","level","maybeUpdateMarkers","renderedMarkersExtent","viewableExtent","calculateExtent","getSize","containsExtent","startTime","performance","current_view","bounds","getCenter","buffer_amount","buffered_bounds","buffer","features_to_add","num_markers","marker_limit_reached","outer_loop","Markers","item_name","item_dict","mapped_name","NameMappings","mapPos","toMapCoords","containsCoordinate","newMarker","Feature","geometry","Point","setStyle","MAX_MARKERS","marker_limit","vectorSource","clear","addFeatures","endTime","updatePlayerMarkers","otherPlayerFeatures","createPlayerFeatureMarker","connected_player_num","playerVector","addFeature","getGeometry","setCoordinates","style_","setRotation","PI","changed","updatePlayerPosition","removeFeature","player_positions","isInCity","city","border_radius","querySelectorAll","borderRadius","dx","dy","distance","sqrt","desired_zoom_type","isMini","zoom_type","positionChanged","atan2","rotationChanged","updateStoppedState","last_moved_time","view","buffer_percent","new_bounds","center","easing","linear","animating","prev_x","prev_y","toGameCoords","playerIcon","getCoordinates","prev_rotation","animate_start","animatePlayerPosition","duration_so_far","animation_percentage","animation_length","new_x","new_y","new_rotation","player_icon_style","zoomLevel","zoomIn","zoom_level","zoomOut","toggleMiniMap","toggleSettings","streamLocation","toggleTracking","next_tracking","unTrack","stopped","map_markers","player_marker","num","player_number","playerMarkerStyle","rotateWithView","text","Text","offsetY","font","fill","Fill","stroke","Stroke","isStopped","world_zoom_level","isNaN","city_zoom_level","full_screen_zoom_level","VectorSource","playerVectorLayer","VectorLayer","renderMode","updateWhileAnimating","updateWhileInteracting","setZIndex","slice","vectorLayer","layers","TileLayer","XYZ","minZoom","maxZoom","View","Map","on","buttons","following_player_icon","MapOverlayClassName","MapContainerStyle","cursor","player_icon","overlaycontent","MapBorderClassName","MapErrorClassName","marker_limit_warning","MapBorderStyle","InGame","_eventListener","Desktop","AdBox","deleteAd","createAd","refreshAd","owAd","retries","ad_removed","owAdReference","removeAd","counter","OwAd","ad_name","openSupporterURL","openStore","page","enums","eStorePage","SubscriptionPage","script","createElement","async","body","appendChild","onStateChanged","onWindowStateChanged","AltTabListener","componentWillUnmount","hidden","focusChanged","isInFocus","window_name","window_state","ad_message","supporter_status","ShareButton","LocationButton","ShareLinkButton","handleTooltipClose","open","handleTooltipOpen","buttonClick","shareGroup","ClickAwayListener","onClickAway","PopperProps","disablePortal","onClose","disableFocusListener","disableHoverListener","disableTouchListener","startIcon","StreamLocation","handleJoinText","joinText","parseCode","createGroup","newGroupCode","joinGroup","uuidValidate","match","leaveGroup","group_code","placeOnClipboard","navigator","clipboard","writeText","trackPlayer","openUrl","sharelocation_content","group_members","player_num","tracking_icon","player_colour","active","Fragment","dropdown_icons","SecondScreen","toggle_open","_window","onMinClicked","onMaxClicked","maximize","onRestoreClicked","swapWindow","ingame","monitor_list","new_width","new_height","monitor_id","monitorId","monitor","changePosition","resize_button","swap_screen","autoHeight","autoHeightMin","autoHeightMax","App","currentWindowName","windowName","getElementsByTagName","Notification","Boolean","hostname","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.96401d87.chunk.js","sourcesContent":["const WindowNames = {\r\n  BACKGROUND: 'background',\r\n  SETTINGS: 'settings',\r\n  IN_GAME: 'ingame',\r\n  DESKTOP: 'desktop',\r\n  SECOND_SCREEN: 'second_screen',\r\n  IN_GAME_FULL: 'ingame_full',\r\n  NOTIFICATION: 'notification'\r\n}\r\n\r\nexport default WindowNames;","// Actions\r\nexport const COORDS = 'coords';\r\nexport const SHOWHIDE_HOTKEY = 'showhide';\r\nexport const SHOWHIDE2_HOTKEY = 'showhide2';\r\nexport const ZOOM_IN_HOTKEY = 'zoom_in';\r\nexport const ZOOM_OUT_HOTKEY = 'zoom_out';\r\nexport const LOCATIONSTREAM_HOTKEY = 'locationstream';\r\nexport const ERROR = 'error';\r\nexport const SHAPE = 'shape';\r\nexport const ENABLED_MARKERS = 'enabled_markers';\r\nexport const OPACITY = 'opacity';\r\nexport const AUTO_HIDE = 'auto_hide';\r\nexport const WINDOWED = 'windowed';\r\nexport const ROTATION = 'rotation';\r\nexport const SECOND_MONITOR = 'second_monitor';\r\nexport const IN_GAME = 'in_game';\r\nexport const GAME_INFO = 'game_info'\r\nexport const TRACK_PLAYER = 'track_player'\r\nexport const AUTO_FOLLOW = 'auto_follow'\r\n","/*global overwolf*/\r\n\r\nlet _launchSource = _detectLaunchSource();\r\n\r\nfunction _detectLaunchSource() {\r\n    let source = _getUrlParameterByName('source');\r\n    return source;\r\n}\r\n\r\nfunction _getUrlParameterByName(name) {\r\n    let regex, results;\r\n    name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\r\n    regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\");\r\n    results = regex.exec(window.location.search);\r\n    return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\r\n}\r\n\r\nfunction getLaunchSource() {\r\n    return _launchSource;\r\n}\r\n\r\nexport default {\r\n    getLaunchSource\r\n}","// Actions\r\nexport const types = {\r\n    RECV_MSG_POSITION_UPDATE: 'recv_msg_position_update',\r\n    RECV_MSG_PLAYER_DISCONNECT: 'recv_msg_player_disconnect',\r\n    JOIN_GROUP: 'join_group',\r\n    LEAVE_GROUP: 'leave_group',\r\n}\r\n\r\n// Action creators\r\nexport const recvMsgPositionUpdate = (id, name, position) => ({ type: types.RECV_MSG_POSITION_UPDATE, payload: {id, name, position} })\r\nexport const recvMsgPlayerDisconnect = (id) => ({ type: types.RECV_MSG_PLAYER_DISCONNECT, payload: {id} })\r\nexport const joinGroup = (groupCode) => ({ type: types.JOIN_GROUP, payload: groupCode})\r\nexport const leaveGroup = () => ({ type: types.LEAVE_GROUP})\r\n","/*global overwolf*/\r\nimport WindowsService from '../services/windows-service';\r\nimport WindowNames from '../constants/window-names';\r\nimport Nodes from '../../data/nodes2.json'\r\nimport * as types from '../../actions/types'\r\nimport * as group from '../../actions/group'\r\n\r\nfunction recoverOnStartUp() {\r\n    //recover settings\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n\r\n\r\n    // const NWMM_notification = localStorage.getItem(\"NWMM_notification_test\")\r\n    // if (NWMM_notification == null){\r\n    //     localStorage.setItem(\"NWMM_notification_test\", true)\r\n    //     WindowsService.restore(WindowNames.NOTIFICATION)\r\n    // }   \r\n    // WindowsService.restore(WindowNames.NOTIFICATION)\r\n    \r\n    const FTI = localStorage.getItem(\"NWMM_FTI2\")\r\n    if (FTI !== \"true\"){\r\n        //WindowsService.restore(WindowNames.DESKTOP);\r\n        localStorage.setItem(\"NWMM_FTI2\", true)\r\n    }\r\n    const NWMM_shape = localStorage.getItem(\"NWMM_shape\")\r\n    if (NWMM_shape !== null){\r\n        if (NWMM_shape === \"false\"){\r\n            store.dispatch({type: types.SHAPE, payload: NWMM_shape})\r\n        }\r\n    }\r\n\r\n    const NWMM_opacity = localStorage.getItem(\"NWMM_opacity\")\r\n    if (NWMM_opacity !== null){\r\n        if (NWMM_opacity !== \"1.0\"){\r\n            store.dispatch({type: types.OPACITY, payload: parseFloat(NWMM_opacity)})\r\n        }\r\n    }\r\n\r\n    const NWMM_auto_hide = localStorage.getItem(\"NWMM_auto_hide\")\r\n    if (NWMM_auto_hide !== null){\r\n        if (NWMM_auto_hide === \"true\"){\r\n            store.dispatch({type: types.AUTO_HIDE, payload: true})\r\n        }\r\n    }\r\n\r\n    const NWMM_rotation = localStorage.getItem(\"NWMM_rotation\")\r\n    if (NWMM_rotation !== null){\r\n        if (NWMM_rotation === \"true\"){\r\n            store.dispatch({type: types.ROTATION, payload: true})\r\n        }\r\n    }\r\n\r\n    const NWMM_last_coords = localStorage.getItem(\"NWMM_last_coords\")\r\n    if (NWMM_last_coords !== null){\r\n        console.log(NWMM_last_coords)\r\n        var last_coords\r\n        if(NWMM_last_coords.endsWith(\",\")){\r\n            last_coords = JSON.parse(\"[\"+NWMM_last_coords+\"0]\")\r\n        } else {\r\n            last_coords = JSON.parse(\"[\"+NWMM_last_coords+\"]\")\r\n        }\r\n        store.dispatch({type: types.COORDS, payload: last_coords})\r\n    }\r\n\r\n    const NWMM_markers = localStorage.getItem(\"NWMM_markers10\")\r\n    if (NWMM_markers !== null){\r\n        store.dispatch({type: types.ENABLED_MARKERS, payload: JSON.parse(NWMM_markers)})\r\n    } else {\r\n        var checked_list = []\r\n        console.log(\"Nodes: \", Nodes)\r\n        for (const node in Nodes){\r\n            if (Nodes[node].value == \"town\"){\r\n                Nodes[node][\"children\"].forEach(item => {\r\n                    if (\"children\" in item){\r\n                    item[\"children\"].forEach(item2 => {\r\n                        checked_list.push(item2.value)\r\n                    })\r\n                    } else {\r\n                    checked_list.push(item.value)\r\n                    } \r\n                })\r\n            }\r\n        }\r\n\r\n        store.dispatch({type: types.ENABLED_MARKERS, payload: checked_list})\r\n    }\r\n\r\n    const NWMM_monitor_mode = localStorage.getItem(\"NWMM_second_monitor\")\r\n    if (NWMM_monitor_mode !== null){\r\n        if (NWMM_monitor_mode === \"false\"){\r\n            store.dispatch({type: types.SECOND_MONITOR, payload: false})\r\n        }\r\n    } else {\r\n        WindowsService.getMonitorInfo()\r\n    }\r\n\r\n\tconst NWMM_groupCode = localStorage.getItem(\"NWMM_groupCode\")\r\n    if (NWMM_groupCode !== null){\r\n        if (NWMM_groupCode !== \"\"){\r\n            store.dispatch({type: group.types.JOIN_GROUP, payload: NWMM_groupCode})\r\n        }\r\n    }\r\n\r\n\tconst NWMM_auto_follow = localStorage.getItem(\"NWMM_auto_follow\")\r\n    if (NWMM_auto_follow !== null){\r\n        if (NWMM_auto_follow !== \"\"){\r\n            store.dispatch({type: types.AUTO_FOLLOW, payload: parseFloat(NWMM_auto_follow)})\r\n        }\r\n    }\r\n}\r\n\r\nfunction saveOnShutdown(){\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    var current_state = store.getState();\r\n    var last_coords = current_state.game.coords\r\n    //don't save if 0,0\r\n    if ((last_coords[0] !== 0) && (last_coords[1] !== 0)){\r\n        localStorage.setItem(\"NWMM_last_coords\", last_coords)\r\n    } \r\n\tif (current_state.group.groupCode !== null){\r\n\t\tlocalStorage.setItem(\"NWMM_groupCode\", current_state.group.groupCode)\r\n\t} else {\r\n\t\tlocalStorage.setItem(\"NWMM_groupCode\", \"\")\r\n\t}\r\n}\r\n\r\nexport default {\r\n    recoverOnStartUp,\r\n    saveOnShutdown\r\n}","/*global overwolf*/\r\nimport * as types from \"../../actions/types\"\r\nimport WindowNames from '../constants/window-names';\r\nimport LaunchSourceService from '../services/launch-source-service';\r\nimport DataPersistenceService from '../services/data-persistence-service';\r\nimport RunningGameService from '../services/running-game-service';\r\n\r\nfunction _obtainWindow(name) {\r\n    return new Promise((resolve, reject) => {\r\n        overwolf.windows.obtainDeclaredWindow(name, (response) => {\r\n            if (response.status !== 'success') {\r\n                return reject(response);\r\n            }\r\n\r\n            resolve(response);\r\n        });\r\n    });\r\n}\r\n\r\nfunction _getCurrentWindow() {\r\n    return new Promise((resolve, reject) => {\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            if (result.status === 'success') {\r\n                resolve(result.window);\r\n            } else {\r\n                reject(result);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction restore(name) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            await _obtainWindow(name);\r\n            overwolf.windows.restore(name, (result) => {\r\n                if (result.status === 'success') {\r\n                    resolve();\r\n                } else {\r\n                    reject(result);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            reject(e)\r\n        }\r\n    });\r\n}\r\n\r\nfunction dragMove(name) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            await _obtainWindow(name);\r\n            let window = await _getCurrentWindow();\r\n            overwolf.windows.dragMove(window.id, (result) => {\r\n                if (result.status === 'success') {\r\n                    resolve();\r\n                } else {\r\n                    reject(result)\r\n                }\r\n            })\r\n        } catch (e) {\r\n            reject(e)\r\n        }\r\n    })\r\n}\r\n\r\nfunction minimize(name) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            await _obtainWindow(name);\r\n            overwolf.windows.minimize(name, (result) => {\r\n                if (result.status === 'success') {\r\n                    resolve();\r\n                } else {\r\n                    reject(result);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            reject(e)\r\n        }\r\n    });\r\n}\r\n\r\nfunction close(name) {\r\n    return new Promise(async (resolve, reject) => {\r\n        try {\r\n            await _obtainWindow(name);\r\n            overwolf.windows.minimize(name, (result) => {\r\n                if (result.status === 'success') {\r\n                    resolve();\r\n                } else {\r\n                    reject(result);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            reject(e)\r\n        }\r\n    });\r\n}\r\n\r\nfunction toggle_ingame() {\r\n    overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME, ((res) => {\r\n        if (res.success){\r\n            overwolf.windows.getWindowState(res.window.id, (res2) => {\r\n                if (res2.success){\r\n                    if ((res2.window_state_ex === \"hidden\") || (res2.window_state_ex === \"minimized\")) {\r\n                        overwolf.windows.restore(res.window.id)\r\n                    } else {\r\n                        overwolf.windows.hide(res.window.id)\r\n                    }\r\n                }\r\n            })\r\n        }\r\n    }))\r\n}\r\n\r\n\r\n\r\n\r\nfunction getMonitorInfo() {\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    overwolf.utils.getMonitorsList((monitors) => {\r\n        if (monitors.success){\r\n            if(monitors.displays.length === 1){\r\n                store.dispatch({type: types.SECOND_MONITOR, payload: false})\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction swapMap(from_ingame) {\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    store.dispatch({type: types.SECOND_MONITOR, payload: from_ingame})\r\n    if (from_ingame){\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.SECOND_SCREEN, ((res2) => {\r\n            if (res2.success){\r\n                overwolf.windows.restore(res2.window.id, res3 => {\r\n                    overwolf.windows.bringToFront(res2.window.id, false,  (res4) => {\r\n                        //now close original window\r\n                        overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME_FULL, ((res) => {\r\n                            if (res.success){\r\n                                overwolf.windows.hide(res.window.id)\r\n                            }\r\n                        }))\r\n                        \r\n                    })\r\n                })\r\n            }\r\n        }))\r\n    } else {\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME_FULL, ((res2) => {\r\n            console.log(res2)\r\n            if (res2.success){\r\n                overwolf.windows.restore(res2.window.id, res3 => {\r\n                    //now close original window\r\n                    overwolf.windows.obtainDeclaredWindow(WindowNames.SECOND_SCREEN, ((res) => {\r\n                        if (res.success){\r\n                            overwolf.windows.hide(res.window.id)\r\n                        }\r\n                    }))\r\n                })\r\n            }\r\n        }))\r\n    }\r\n}\r\n\r\nfunction toggleMap() {            \r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    var current_state = store.getState();\r\n    if (!current_state.game.second_monitor){\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME_FULL, ((res) => {\r\n            if (res.success){\r\n                overwolf.windows.getWindowState(res.window.id, (res2) => {\r\n                    if (res2.success){\r\n                        if ((res2.window_state_ex === \"hidden\") || (res2.window_state_ex === \"minimized\") || (res2.window_state_ex === \"closed\")) {\r\n                            overwolf.windows.restore(res.window.id)\r\n                            overwolf.windows.bringToFront(res.window.id, false,  (res3) => {})\r\n                        } else {\r\n                            overwolf.windows.hide(res.window.id)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }))\r\n    } else {\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.SECOND_SCREEN, ((res) => {\r\n            if (res.success){\r\n                overwolf.windows.getWindowState(res.window.id, (res2) => {\r\n                    if (res2.success){\r\n                        if ((res2.window_state_ex === \"hidden\") || (res2.window_state_ex === \"minimized\") || (res2.window_state_ex === \"closed\")) {\r\n                            overwolf.windows.restore(res.window.id)\r\n                            overwolf.windows.bringToFront(res.window.id, false,  (res3) => {})\r\n                        } else {\r\n                            overwolf.windows.hide(res.window.id)\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        }))\r\n    }\r\n}    \r\n\r\nfunction QuitApp() {\r\n    // save last known data before quitting\r\n    DataPersistenceService.saveOnShutdown()\r\n\r\n    const windows = [WindowNames.BACKGROUND, WindowNames.SECOND_SCREEN, WindowNames.IN_GAME,  WindowNames.SETTINGS,  WindowNames.IN_GAME_FULL]\r\n    windows.forEach(window => {\r\n        overwolf.windows.obtainDeclaredWindow(window, ((res) => {\r\n            if (res.success){\r\n                overwolf.windows.close(res.window.id)\r\n            }\r\n        }))\r\n    })\r\n}\r\n\r\nfunction openBrowser (code=\"\") {\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    var current_state = store.getState();\r\n    var last_coords = current_state.game.coords\r\n    var url = \"https://www.newworldminimap.com/map\"   \r\n    // var url = \"http://localhost:3000/map\" \r\n    if (code !== \"\"){\r\n        url = url + \"?code=\"+code\r\n        if ((last_coords[0] !== 0) && (last_coords[1] !== 0)){\r\n            url = url+\"&coords=\"+last_coords[0]+\",\"+last_coords[1]+\",\"+last_coords[2]\r\n        } \r\n    } else {\r\n        if ((last_coords[0] !== 0) && (last_coords[1] !== 0)){\r\n            url = url+\"?coords=\"+last_coords[0]+\",\"+last_coords[1]+\",\"+last_coords[2]\r\n        } \r\n    }\r\n\r\n    overwolf.utils.openUrlInDefaultBrowser(url)\r\n}\r\n\r\nasync function getStartupWindowName() {\r\n    let launchSource = LaunchSourceService.getLaunchSource();\r\n\r\n    if (launchSource === 'gamelaunchevent') {\r\n        return WindowNames.IN_GAME;\r\n    }\r\n\r\n    // if toggle hotkey -> 'settings'\r\n\r\n    let isGameRunning = await RunningGameService.isGameRunning();\r\n    if (isGameRunning) {\r\n        return WindowNames.IN_GAME;\r\n    }\r\n\r\n    return WindowNames.IN_GAME;\r\n}\r\n\r\nexport default {\r\n    restore,\r\n    dragMove,\r\n    minimize,\r\n    getStartupWindowName,\r\n    toggle_ingame,\r\n    toggleMap,\r\n    QuitApp,\r\n    getMonitorInfo,\r\n    swapMap,\r\n    openBrowser\r\n}","/*global overwolf*/\r\nimport WindowsService from './windows-service'\r\nimport WindowNames from '../constants/window-names'\r\n\r\nlet _gameRunningChangedListeners = [];\r\n\r\nfunction _init() {\r\n    overwolf.games.onGameInfoUpdated.removeListener(_onGameInfoUpdated);\r\n    overwolf.games.onGameInfoUpdated.addListener(_onGameInfoUpdated);\r\n}\r\n\r\nfunction _onGameInfoUpdated(event) {\r\n    let gameRunning;\r\n    // console.log(\"gameinfo event: \", event)\r\n    if (event &&\r\n        (event.runningChanged || event.gameChanged)) {\r\n        gameRunning = (event.gameInfo && event.gameInfo.isRunning);\r\n\r\n        if (gameRunning === true){\r\n            if (event.gameInfo.classId !== 21816){\r\n                gameRunning = false\r\n            }\r\n        }\r\n        for (let listener of _gameRunningChangedListeners) {\r\n            listener(gameRunning);\r\n        }\r\n    }\r\n    if(event.gameOverlayChanged == true){\r\n        if(event.reason.includes(\"gameOverlayCursorVisibility\")){\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            var current_state = store.getState();\r\n            var auto_hide = current_state.game.auto_hide\r\n            if (auto_hide === true){\r\n                if(event.gameInfo.overlayInfo.isCursorVisible == true) {\r\n                    WindowsService.minimize(WindowNames.IN_GAME)\r\n                } else {\r\n                    WindowsService.restore(WindowNames.IN_GAME)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nasync function isGameRunning() {\r\n    let gameRunning = await _isGameRunning();\r\n    return gameRunning;\r\n}\r\n\r\nfunction _isGameRunning() {\r\n    return new Promise((resolve => {\r\n        overwolf.games.getRunningGameInfo(function (runningGameInfo) {\r\n            console.log(\"runningGameInfo: \", runningGameInfo)\r\n            if (runningGameInfo && runningGameInfo.isRunning) {\r\n                if (runningGameInfo.classId === 21816){\r\n                    resolve(true);\r\n                } else {\r\n                    resolve(false);\r\n                }\r\n            } else {\r\n                resolve(false);\r\n            }\r\n        });\r\n    }));\r\n}\r\n\r\nfunction addGameRunningChangedListener(callback) {\r\n    _gameRunningChangedListeners.push(callback);\r\n}\r\n\r\n_init();\r\n\r\nexport default {\r\n    isGameRunning,\r\n    addGameRunningChangedListener\r\n}\r\n","const HotkeyIds = {\r\n  SHOW_HIDE: 'nwmm_showhide',\r\n  ZOOM_IN: 'nwmm_zoom_in',\r\n  ZOOM_OUT: 'nwmm_zoom_out'\r\n}\r\n\r\nexport default HotkeyIds;","/*global overwolf*/\r\n\r\nimport HOTKEYS from  '../constants/hotkeys-ids';\r\nimport * as types from '../../actions/types.js'\r\nimport WindowsService from './windows-service';\r\n\r\nfunction _getHotkey(hotkeyId, callback) {\r\n    overwolf.settings.getHotKey(hotkeyId, function (result) {\r\n        if (!result || result.status === \"error\" || !result.hotkey) {\r\n            setTimeout(function () {\r\n                _getHotkey(hotkeyId, callback);\r\n            }, 2000);\r\n        } else {\r\n            callback(result.hotkey);\r\n        }\r\n    });\r\n}\r\n\r\nfunction _setHotkey(hotkeyId, action) {\r\n    overwolf.settings.registerHotKey(hotkeyId, function (result) {\r\n        if (result.status === 'success') {\r\n            action();\r\n        } else {\r\n            console.error(`[HOTKEYS SERVICE] failed to register hotkey ${hotkeyId}`);\r\n        }\r\n    });\r\n}\r\n\r\nfunction getShowHideHotkey() {\r\n    return new Promise((resolve, reject) => {\r\n        _getHotkey(HOTKEYS.TAKE_SCREENSHOT, function (result) {\r\n            resolve(result);\r\n        });\r\n    });\r\n}\r\n\r\nfunction getZoomInHotkey() {\r\n    return new Promise((resolve, reject) => {\r\n        _getHotkey(HOTKEYS.TOGGLE, function (result) {\r\n            resolve(result);\r\n        });\r\n    });\r\n}\r\n\r\nfunction getZoomOutHotkey() {\r\n    return new Promise((resolve, reject) => {\r\n        _getHotkey(HOTKEYS.TOGGLE, function (result) {\r\n            resolve(result);\r\n        });\r\n    });\r\n}\r\n\r\nfunction setTakeScreenshotHotkey(action) {\r\n    _setHotkey(HOTKEYS.TAKE_SCREENSHOT, action);\r\n}\r\n\r\nfunction addHotkeyChangeListener(listener) {\r\n    overwolf.settings.OnHotKeyChanged.addListener(listener);\r\n}\r\n\r\nfunction HotkeyStartup () {\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n\r\n    overwolf.settings.hotkeys.get((res) => {\r\n        if (res.success){\r\n            if (21816 in res.games){\r\n              res.games[21816].forEach(hotkey => {\r\n                  console.log(hotkey)\r\n                  if (hotkey.name === \"nwmm_showhide\") {\r\n                      if (hotkey.isUnassigned){\r\n                        store.dispatch({type: types.SHOWHIDE_HOTKEY, payload: \"Unassigned\"})\r\n                      } else {\r\n                        store.dispatch({type: types.SHOWHIDE_HOTKEY, payload: hotkey.binding})\r\n                      }\r\n                }\r\n                if (hotkey.name === \"nwmm_zoom_in\") {\r\n                    if (hotkey.isUnassigned){\r\n                      store.dispatch({type: types.ZOOM_IN_HOTKEY, payload: \"Unassigned\"})\r\n                    } else {\r\n                      store.dispatch({type: types.ZOOM_IN_HOTKEY, payload: hotkey.binding})\r\n                    }\r\n                }\r\n                if (hotkey.name === \"nwmm_zoom_out\") {\r\n                    if (hotkey.isUnassigned){\r\n                      store.dispatch({type: types.ZOOM_OUT_HOTKEY, payload: \"Unassigned\"})\r\n                    } else {\r\n                      store.dispatch({type: types.ZOOM_OUT_HOTKEY, payload: hotkey.binding})\r\n                    }\r\n                }\r\n                if (hotkey.name === \"nwmm_showhide2\") {\r\n                    if (hotkey.isUnassigned){\r\n                      store.dispatch({type: types.SHOWHIDE2_HOTKEY, payload: \"Unassigned\"})\r\n                    } else {\r\n                      store.dispatch({type: types.SHOWHIDE2_HOTKEY, payload: hotkey.binding})\r\n                    }\r\n              }\r\n              if (hotkey.name === \"nwmm_locationstream\") {\r\n                if (hotkey.isUnassigned){\r\n                  store.dispatch({type: types.LOCATIONSTREAM_HOTKEY, payload: \"Unassigned\"})\r\n                } else {\r\n                  store.dispatch({type: types.LOCATIONSTREAM_HOTKEY, payload: hotkey.binding})\r\n                }\r\n          }\r\n              })\r\n            }\r\n        }\r\n    })\r\n    // var current_store = store.getState()\r\n    overwolf.settings.hotkeys.onPressed.addListener((res) => {\r\n        if (res[\"name\"] === \"nwmm_showhide\") {\r\n            WindowsService.toggle_ingame()\r\n        }\r\n        if (res[\"name\"] === \"nwmm_showhide2\") {\r\n            WindowsService.toggleMap()\r\n        }\r\n        if (res[\"name\"] === \"nwmm_locationstream\") {\r\n            WindowsService.openBrowser()\r\n        }\r\n    })\r\n\r\n    overwolf.settings.OnHotKeyChanged.addListener((res) => {\r\n        if (res.source === \"nwmm_showhide\") {\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            store.dispatch({type: types.SHOWHIDE_HOTKEY, payload: res.hotkey})\r\n        }\r\n        if (res.source === \"nwmm_zoom_in\") {\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            store.dispatch({type: types.ZOOM_IN_HOTKEY, payload: res.hotkey})\r\n        }\r\n        if (res.source === \"nwmm_zoom_out\") {\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            store.dispatch({type: types.ZOOM_OUT_HOTKEY, payload: res.hotkey})\r\n        }\r\n        if (res.source === \"nwmm_showhide2\") {\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            store.dispatch({type: types.SHOWHIDE2_HOTKEY, payload: res.hotkey})\r\n        }\r\n        if (res.source === \"nwmm_locationstream\") {\r\n            const store = overwolf.windows.getMainWindow().reduxStore;\r\n            store.dispatch({type: types.LOCATIONSTREAM_HOTKEY, payload: res.hotkey})\r\n        }\r\n    })\r\n}\r\n\r\nexport default {\r\n    getShowHideHotkey,\r\n    getZoomInHotkey,\r\n    getZoomOutHotkey,\r\n    setTakeScreenshotHotkey,\r\n    addHotkeyChangeListener,\r\n    HotkeyStartup\r\n};","/*global overwolf*/\r\n\r\nimport screenshotService from './screenshots-service';\r\n\r\nconst REQUIRED_FEATURES = ['kill'];\r\nconst REGISTER_RETRY_TIMEOUT = 10000;\r\n\r\nfunction registerToGEP() {\r\n    console.log(\"registering GEP\")\r\n    overwolf.games.events.onNewEvents.removeListener(_handleGameEvent);\r\n    overwolf.games.events.onNewEvents.addListener(_handleGameEvent);\r\n    overwolf.games.events.onNewEvents.removeListener(_handleGameInfo);\r\n    overwolf.games.events.onNewEvents.addListener(_handleGameInfo);\r\n    // overwolf.games.events.setRequiredFeatures(REQUIRED_FEATURES, function (response) {\r\n    //     if (response.status === 'error') {\r\n    //         setTimeout(registerToGEP, REGISTER_RETRY_TIMEOUT);\r\n    //     } else if (response.status === 'success') {\r\n    //         overwolf.games.events.onNewEvents.removeListener(_handleGameEvent);\r\n    //         overwolf.games.events.onNewEvents.addListener(_handleGameEvent);\r\n    //     }\r\n    // });\r\n}\r\n\r\nasync function _handleGameEvent(eventsInfo) {\r\n    console.log(\"Event\", eventsInfo)\r\n    // for (let eventData of eventsInfo.events) {\r\n    //     switch (eventData.name) {\r\n    //         case 'kill': {\r\n    //             try {\r\n    //                 let screenshotUrl = await screenshotService.takeScreenshot();\r\n    //                 window.ow_eventBus.trigger('screenshot', screenshotUrl);\r\n    //             } catch (e) {\r\n    //                 console.error(e);\r\n    //             }\r\n\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n}\r\n\r\nasync function _handleGameInfo(gameInfo) {\r\n    console.log(\"Info Event:\", gameInfo)\r\n    // for (let eventData of eventsInfo.events) {\r\n    //     switch (eventData.name) {\r\n    //         case 'kill': {\r\n    //             try {\r\n    //                 let screenshotUrl = await screenshotService.takeScreenshot();\r\n    //                 window.ow_eventBus.trigger('screenshot', screenshotUrl);\r\n    //             } catch (e) {\r\n    //                 console.error(e);\r\n    //             }\r\n\r\n    //             break;\r\n    //         }\r\n    //     }\r\n    // }\r\n}\r\n\r\nexport default {\r\n    registerToGEP\r\n}","let _listeners = [];\r\n\r\nfunction addListener(eventHandler) {\r\n    _listeners.push(eventHandler);\r\n}\r\n\r\nfunction trigger(eventName, data) {\r\n    for (let listener of _listeners) {\r\n        listener(eventName, data);\r\n    }\r\n}\r\n\r\nexport default {\r\n    addListener,\r\n    trigger\r\n}","// Modified from https://github.com/overwolf/overwolf-plugins/blob/master/sample_apps/downloader/overwolfplugin.js\r\n\r\n/*global overwolf*/\r\n\r\nfunction OverwolfPlugin(extraObjectNameInManifest, addNameToObject) {\r\n  var _pluginInstance = null;\r\n  var _extraObjectName = extraObjectNameInManifest;\r\n  var _addNameToObject = addNameToObject;\r\n\r\n  // public\r\n  this.initialize = function(callback) {\r\n    return _initialize(callback);\r\n  }\r\n\r\n  this.initialized = function() {\r\n    return _pluginInstance != null;\r\n  };\r\n\r\n  this.get = function() {\r\n    return _pluginInstance;\r\n  };\r\n\r\n  // privates\r\n  function _initialize(callback) {\r\n    var proxy = null;\r\n\r\n    try {\r\n      proxy = overwolf.extensions.current.getExtraObject;\r\n    } catch(e) {\r\n      console.error(\r\n      \"overwolf.extensions.current.getExtraObject doesn't exist!\");\r\n      return callback(false);\r\n    }\r\n\r\n    proxy(_extraObjectName, function(result) {\r\n      if (result.status != \"success\") {\r\n        console.error(\r\n        \"failed to create \" + _extraObjectName + \" object: \" + JSON.stringify(result));\r\n        return callback(false);\r\n      }\r\n\r\n      _pluginInstance = result.object;\r\n\r\n      if (_addNameToObject) {\r\n        _pluginInstance._PluginName_ = _extraObjectName;\r\n      }\r\n\r\n      return callback(true);\r\n    });\r\n  }\r\n}\r\n\r\nexport default OverwolfPlugin;\r\n","/*global overwolf*/\r\n\r\nimport * as types from \"../../actions/types\"\r\nimport OverwolfPlugin from \"./overwolfplugin.js\"\r\nimport { v4 as uuidv4 } from 'uuid';\r\nvar plugin = new OverwolfPlugin(\"newworldminimap-plugin\", true);\r\n\r\nvar PlayerNameuuid = uuidv4();\r\nvar running = false\r\nconst DEBUG = false\r\n\r\nclass CoordService {\r\n    \r\n    async startScreenshotWorker() {\r\n        if(running) return;\r\n        running = true\r\n\r\n        console.log(\"worker starting\")\r\n\r\n        await this.initPlugin();\r\n\r\n        console.log(\"worker started\")\r\n\r\n        while(running) {\r\n            const before = Date.now();\r\n            try {\r\n                await this.getCoords();\r\n            } catch (e) {\r\n                console.log(e);\r\n                await new Promise(r => setTimeout(r, 1000));\r\n            }\r\n            const after = Date.now()\r\n            const duration = (after-before)\r\n            const delay = Math.max(500-duration, 50);\r\n            //change to 250 but only send event if coords change\r\n            if (DEBUG) console.log(\"duration: \", duration)\r\n            if (DEBUG) console.log(\"delay: \", delay)\r\n            await new Promise(r => setTimeout(r, delay));\r\n        }\r\n    }\r\n\r\n    async initPlugin() {\r\n        // Load plugin\r\n        const pluginInitAsync = function() {\r\n            return new Promise((resolve, reject) => {\r\n                plugin.initialize(resolve);\r\n            });\r\n        };\r\n        var pluginStatus = await pluginInitAsync();\r\n        if (pluginStatus == false) {\r\n            console.error(\"Plugin couldn't be loaded?\");\r\n        };\r\n\r\n        plugin.get().RunServer(42224, \"/Location\", true);\r\n    }\r\n\r\n    async getCoords() {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        const overwolfEventGetInfoFn = function() {\r\n            return new Promise((resolve, reject) => {\r\n                overwolf.games.events.getInfo(resolve);\r\n            });\r\n        };\r\n        let res = await overwolfEventGetInfoFn();\r\n        if (res.success === true) {\r\n            if (\"res\" in res){\r\n                if (\"game_info\" in res.res){\r\n                    var mapName = \"\"\r\n                    if (\"map\" in res.res.game_info){\r\n                        mapName = res.res.game_info.map\r\n                    }\r\n                    var playerName = \"local\"\r\n                    if (\"player_name\" in res.res.game_info){\r\n                        playerName = res.res.game_info.player_name\r\n                    } else {\r\n                        playerName = PlayerNameuuid\r\n                    }\r\n                    var worldName = \"\"\r\n                    if (\"world_name\" in res.res.game_info){\r\n                        worldName = res.res.game_info.world_name\r\n                    }\r\n                    store.dispatch({type: types.GAME_INFO, payload: {\r\n                        mapName: mapName,\r\n                        playerName: playerName,\r\n                        worldName: worldName,\r\n                    }})\r\n                    if (\"location\" in res.res.game_info) {\r\n                        // console.log(res)\r\n                        var position_string = res.res.game_info.location.split(\"player.position.\")\r\n                        // console.log(position_string)\r\n                        var position_x = parseFloat(position_string[1].replace(\"x\", \"\").replace(\",\", \"\"))\r\n                        var position_y = parseFloat(position_string[2].replace(\"y\", \"\").replace(\",\", \"\"))\r\n\r\n                        var rotation_string = position_string[3].split(\"player.rotation.\")\r\n                        var rotation = parseFloat(rotation_string[3].replace(\"z,\", \"\").split(\",\")[0])\r\n                        \r\n                        // var coords = JSON.parse(res.res.game_info.location)\r\n                        // console.log([position_x, position_y])\r\n                        store.dispatch({type: types.COORDS, payload: [position_x, position_y, rotation]})\r\n\r\n                        // Stick this here for quick development. May move later.\r\n                        let msg = {\r\n                            type: 'LOCAL_POSITION_UPDATE',\r\n                            playerName: playerName,\r\n                            position: [position_x, position_y, rotation],\r\n                            mapName: mapName,\r\n                        }\r\n                        plugin.get().Broadcast(JSON.stringify(msg));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst c = new CoordService();\r\nexport default c;\r\n","import * as types from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    coords: [9356.67, 2693.11, null],\r\n    showhide: \"\",\r\n    zoom_in: \"\",\r\n    zoom_out: \"\",\r\n    showhide2: \"\",\r\n    locationstream: \"\",\r\n    error: false,\r\n    circle: \"true\",\r\n    enabled_markers: null,\r\n    opacity: 1,\r\n    auto_hide: false,\r\n    compass_mode: false,\r\n    supporter: {status: false, type: \"Checked\"},\r\n    second_monitor: true,\r\n    mapName: null,\r\n    playerName: null,\r\n    worldName: null,\r\n    in_game: false,\r\n    tracked_player: \"\",\r\n    auto_follow: 0.3,\r\n}\r\n\r\nexport default function GameReducer (state = INITIAL_STATE, action) {\r\n    switch (action.type) {\r\n      case types.COORDS:\r\n        return { ...state,\r\n          coords: action.payload,\r\n          error: false,\r\n        };\r\n      case types.SHOWHIDE_HOTKEY:\r\n        return { ...state,\r\n          showhide: action.payload\r\n        };\r\n      case types.SHOWHIDE2_HOTKEY:\r\n        return { ...state,\r\n          showhide2: action.payload\r\n        };\r\n      case types.ZOOM_IN_HOTKEY:\r\n        return { ...state,\r\n          zoom_in: action.payload\r\n        };\r\n      case types.ZOOM_OUT_HOTKEY:\r\n        return { ...state,\r\n          zoom_out: action.payload\r\n        };\r\n      case types.LOCATIONSTREAM_HOTKEY:\r\n        return { ...state,\r\n          locationstream: action.payload\r\n        };\r\n      case types.ERROR:\r\n        return { ...state,\r\n          error: action.payload\r\n        };\r\n      case types.SHAPE:\r\n        return { ...state,\r\n          circle: action.payload\r\n        };\r\n      case types.ENABLED_MARKERS:\r\n        return { ...state,\r\n          enabled_markers: action.payload\r\n        };\r\n      case types.OPACITY:\r\n        return { ...state,\r\n          opacity: action.payload\r\n        };\r\n      case types.AUTO_HIDE:\r\n        return { ...state,\r\n          auto_hide: action.payload\r\n        };     \r\n      case types.ROTATION:\r\n        return { ...state,\r\n          compass_mode: action.payload\r\n        };\r\n      case types.SECOND_MONITOR:\r\n        return { ...state,\r\n          second_monitor: action.payload\r\n        };\r\n      case types.IN_GAME:\r\n        return { ...state,\r\n          in_game: action.payload\r\n        };\r\n      case types.GAME_INFO:\r\n        return { ...state,\r\n          mapName: action.payload.mapName,\r\n          playerName: action.payload.playerName,\r\n          worldName: action.payload.worldName,\r\n        }\r\n      case types.TRACK_PLAYER:\r\n        return { ...state,\r\n          tracked_player: action.payload\r\n        };\r\n      case types.AUTO_FOLLOW:\r\n        return { ...state,\r\n          auto_follow_buffer: action.payload\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n","import { types } from \"../actions/group\";\r\n\r\nconst INITIAL_STATE = {\r\n    connectedPlayers: {\r\n        // 'player uuid1': {\r\n        //     name: 'Short',\r\n        //     position: [9356.67, 2693.11, null],\r\n        // },\r\n        // 'player uuid2': {\r\n        //     name: 'Mediumlen',\r\n        //     position: [8356.67, 3693.11, 359],\r\n        // },\r\n        // 'player uuid3': {\r\n        //     name: 'MuchLongerName',\r\n        //     position: [7356.67, 4693.11, 180],\r\n        // },\r\n    },\r\n    groupCode: null,\r\n}\r\n\r\nexport default function GroupReducer(state = INITIAL_STATE, action) {\r\n    switch (action.type) {\r\n        case types.JOIN_GROUP:\r\n            return { ...state,\r\n                groupCode: action.payload\r\n            }\r\n        case types.LEAVE_GROUP:\r\n            return { ...state,\r\n                groupCode: null,\r\n                connectedPlayers: {},\r\n            }\r\n        case types.RECV_MSG_POSITION_UPDATE: {\r\n            let { id, name, position } = action.payload\r\n            return { ...state,\r\n                connectedPlayers: {\r\n                    ...state.connectedPlayers,\r\n                    [id]: {\r\n                        name,\r\n                        position,\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        case types.RECV_MSG_PLAYER_DISCONNECT: {\r\n            let { id } = action.payload\r\n            // Create a copy of connectedPlayers, with that 1 key [id] removed\r\n            let { [id]: _value, ...remainingConnectedPlayers } = state.connectedPlayers\r\n            return { ...state,\r\n                connectedPlayers: remainingConnectedPlayers\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport GameReducer from './GameReducer';\r\nimport GroupReducer from './GroupReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  game: GameReducer,\r\n  group: GroupReducer,\r\n})\r\nexport default rootReducer\r\n","/*global overwolf*/\r\n\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport ReduxThunk from 'redux-thunk';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport RunningGameService from '../../common/services/running-game-service';\r\nimport WindowsService from '../../common/services/windows-service';\r\nimport HotkeysService from '../../common/services/hotkeys-service';\r\nimport DataPersistenceService from '../../common/services/data-persistence-service';\r\nimport GEPService from '../../common/services/gep-service';\r\nimport ScreenshotService from '../../common/services/screenshots-service';\r\nimport EventBus from '../../common/services/event-bus';\r\nimport CoordService from '../../common/services/coord-service';\r\nimport reducers from '../../reducers';\r\nimport * as types from '../../actions/types';\r\n\r\nconst store = createStore(\r\n    reducers,\r\n    {},\r\n    compose(\r\n      applyMiddleware(ReduxThunk),\r\n    ),\r\n  );\r\n  window.reduxStore = store;\r\n\r\nclass BackgroundController {\r\n    static async run() {\r\n        window.ow_eventBus = EventBus;\r\n\r\n        BackgroundController._registerAppLaunchTriggerHandler();\r\n        // BackgroundController._registerHotkeys();\r\n        \r\n        // let startupWindow = await WindowsService.getStartupWindowName();\r\n        // WindowsService.restore(startupWindow);\r\n\r\n        let isGameRunning = await RunningGameService.isGameRunning();\r\n\r\n        DataPersistenceService.recoverOnStartUp()\r\n        HotkeysService.HotkeyStartup()\r\n\r\n        if (isGameRunning) {\r\n            // GEPService.registerToGEP();\r\n            WindowsService.restore(WindowNames.IN_GAME)\r\n            //remove after testing so only minimap opens if game running - potential to remember what windows were open and restore those.\r\n            //WindowsService.restore(WindowNames.SECOND_SCREEN);\r\n            setTimeout(() => CoordService.startScreenshotWorker(), 0);\r\n            store.dispatch({type: types.IN_GAME, payload: true})\r\n            // \r\n            // GEPService.registerToGEP()\r\n            //WindowsService.minimize(WindowNames.IN_GAME);\r\n        } else {\r\n            store.dispatch({type: types.SECOND_MONITOR, payload: true})\r\n            WindowsService.restore(WindowNames.SECOND_SCREEN);\r\n        }\r\n\r\n        RunningGameService.addGameRunningChangedListener((isGameRunning) => {\r\n            if (isGameRunning) {\r\n                WindowsService.restore(WindowNames.IN_GAME)\r\n                //remove after testing so only minimap opens if game running - potential to remember what windows were open and restore those.\r\n                //WindowsService.restore(WindowNames.SECOND_SCREEN)\r\n                setTimeout(() => CoordService.startScreenshotWorker(), 0);\r\n                store.dispatch({type: types.IN_GAME, payload: true})\r\n                // GEPService.registerToGEP()\r\n                \r\n            } else {\r\n                // WindowsService.minimize(WindowNames.IN_GAME);\r\n                console.log('closing app after game closed');\r\n                store.dispatch({type: types.IN_GAME, payload: false})\r\n                WindowsService.QuitApp()\r\n            }\r\n        });\r\n        \r\n        \r\n    }\r\n\r\n\r\n    static _registerAppLaunchTriggerHandler() {\r\n        overwolf.extensions.onAppLaunchTriggered.removeListener(\r\n            BackgroundController._onAppRelaunch);\r\n        overwolf.extensions.onAppLaunchTriggered.addListener(\r\n            BackgroundController._onAppRelaunch);\r\n    }\r\n\r\n    static _onAppRelaunch() {\r\n        WindowsService.restore(WindowNames.IN_GAME);\r\n        // WindowsService.restore(WindowNames.DESKTOP);\r\n        var current_state = store.getState();\r\n        if (current_state.game.second_monitor){\r\n            WindowsService.restore(WindowNames.SECOND_SCREEN);\r\n        }\r\n    }\r\n}\r\n\r\nexport default BackgroundController;","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { recvMsgPositionUpdate, recvMsgPlayerDisconnect } from '../actions/group.js'\r\n\r\nconst WEBSOCKET_URI = `wss://newworldminimap.com`\r\n// const WEBSOCKET_URI = `ws://localhost:8080`\r\n\r\nclass LocationSharingController extends React.Component {\r\n    componentDidMount() {\r\n        this.ws = null\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.groupCode !== prevProps.groupCode) {\r\n            this.resetWebsocket()\r\n        }\r\n        if (this.props.coords !== prevProps.coords) {\r\n            this.broadcastPosition()\r\n        }\r\n    }\r\n\r\n    resetWebsocket() {\r\n        if (this.ws !== null) {\r\n            this.ws.close()\r\n        }\r\n\r\n        if (this.props.groupCode !== null) {\r\n            this.ws = new WebSocket(`${WEBSOCKET_URI}/locationSharing?groupCode=${this.props.groupCode}`);\r\n\r\n            this.ws.onmessage = (event) => {\r\n                let msg;\r\n                try {\r\n                    msg = JSON.parse(event.data);\r\n                } catch (e) {\r\n                    console.error(`ERROR: Couldn't parse message '${event.data}'`);\r\n                    return;\r\n                }\r\n                if (msg.type === 'POSITION_UPDATE') {\r\n                    let { playerId, playerName, position } = msg;\r\n                    this.props.recvMsgPositionUpdate(playerId, playerName, position)\r\n                } else if (msg.type === 'PLAYER_DISCONNECT') {\r\n                    let { playerId } = msg;\r\n                    this.props.recvMsgPlayerDisconnect(playerId)\r\n                } else {\r\n                    console.error(`Unhandled message: '${event.data}'`)\r\n                }\r\n            };\r\n            this.ws.onopen = function (e) {\r\n                console.log('Connection open');\r\n            };\r\n            this.ws.onclose = function (e) {\r\n                console.log('Connection closed');\r\n            };\r\n            this.ws.onerror = function(error) {\r\n                console.error(`ERROR: '${error.message}'`);\r\n            };\r\n            localStorage.setItem(\"NWMM_groupCode\", this.props.groupCode)\r\n        } else {\r\n            this.ws = null\r\n            localStorage.setItem(\"NWMM_groupCode\", \"\")\r\n        }\r\n    }\r\n\r\n    broadcastPosition() {\r\n        if (this.ws?.readyState === 1) {\r\n            let msg = {\r\n                playerName: this.props.playerName,\r\n                position: this.props.coords,\r\n            }\r\n            this.ws.send(JSON.stringify(msg));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return null\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const { coords, playerName } = state.game\r\n    const { groupCode } = state.group\r\n    return { coords, groupCode, playerName }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    recvMsgPositionUpdate,\r\n    recvMsgPlayerDisconnect,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LocationSharingController)\r\n","import React, { Component } from 'react';\r\nimport BackgroundController from './BackgroundController';\r\nimport LocationSharingController from '../../components/LocationSharingController'\r\n\r\nclass Background extends Component {\r\n    componentDidMount() {\r\n        BackgroundController.run();\r\n    }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Background\">\r\n        <LocationSharingController />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Background;\r\n","/*global overwolf*/\r\n\r\nconst SIGNIFICANT_MOUSE_MOVE_THRESHOLD = 1;\r\n\r\nclass DragService {\r\n    constructor(currentWindow, element) {\r\n        this.currentWindow = currentWindow;\r\n        this.initialMousePosition = 0;\r\n        this.isMouseDown = false;\r\n\r\n        element.addEventListener('mousedown', this.onDragStart.bind(this));\r\n        element.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    }\r\n\r\n    _isSignificantMouseMove(event) {\r\n        if (!this.initialMousePosition) {\r\n            return false;\r\n        }\r\n\r\n        let x = event.clientX;\r\n        let y = event.clientY;\r\n        let diffX = Math.abs(x - this.initialMousePosition.x);\r\n        let diffY = Math.abs(y - this.initialMousePosition.y);\r\n        let isSignificant =\r\n            (diffX > SIGNIFICANT_MOUSE_MOVE_THRESHOLD) ||\r\n            (diffY > SIGNIFICANT_MOUSE_MOVE_THRESHOLD);\r\n\r\n        return isSignificant;\r\n    }\r\n\r\n    onDragStart(event) {\r\n        this.isMouseDown = true;\r\n        this.initialMousePosition = {\r\n            x: event.clientX,\r\n            y: event.clientY\r\n        };\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        if (!this.isMouseDown) {\r\n            return;\r\n        }\r\n\r\n        let isSignificantMove = this._isSignificantMouseMove(event);\r\n        if (!isSignificantMove) {\r\n            return;\r\n        }\r\n\r\n        this.isMouseDown = false;\r\n\r\n        if (this.currentWindow) {\r\n            overwolf.windows.dragMove(this.currentWindow.id);\r\n        }\r\n    }\r\n}\r\n\r\nexport default DragService;","import React, { Component } from 'react';\r\nimport {MdInfoOutline, MdOutlineChevronRight, MdOutlineExpandMore, MdMinimize, MdOutlineHorizontalRule, MdCheck, MdOutlineCheckBoxOutlineBlank, MdOutlineCheckBox, MdOutlineIndeterminateCheckBox, MdArrowDropDown, MdExpandLess, MdArrowRight, MdOutlineLens} from 'react-icons/md'\r\nimport Collapse from '@mui/material/Collapse';\r\nimport classNames from 'classnames';\r\n\r\nconst NodeImages = \r\n{ \r\n  \"Chests\": \"supply_1\",\r\n  \"Documents\": \"document\",\r\n  \"Essences\": \"spirit_plant\",\r\n  \"Fishing\": \"hotspot_secret\",\r\n  \"Monsters\": \"wolf\",\r\n  \"Ores\": \"iron\",\r\n  \"Plants\": \"vegetable\",\r\n  \"Woods\": \"wyrdwood\",\r\n  \"Town\": \"town_board\",\r\n}\r\n\r\nclass FilterItem extends Component {\r\n  constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    toggle_filter_item = () => {\r\n      if (!this.props.data.disabled){\r\n        var add\r\n        if (this.props.data.enabled === true){\r\n          add = false\r\n        } else {\r\n          add = true\r\n        }\r\n        this.props.modify_enabled(add, [this.props.data.value])\r\n      }\r\n    }\r\n\r\n  render(){\r\n\r\n    var checkboxfill\r\n\r\n    if(this.props.data.enabled === true) {\r\n      checkboxfill= <span className=\"NodeRowCheckboxTicked\"> <MdCheck style={{height: \"20px\", width: \"20px\"}}></MdCheck></span>\r\n    }\r\n\r\n    return (\r\n      <div className=\"FilterRow\" onClick={this.toggle_filter_item}>\r\n        <div className=\"NodeRowTop\">\r\n          <div className=\"NodeRowExpandPlaceholder\">\r\n          </div>\r\n          <span className=\"NodeRowCheckbox\">{checkboxfill}</span>\r\n          <img className=\"FilterRowImage\" src={\"icons/\"+this.props.data.image_name+\"_compass.png\"}/>\r\n          <span className=\"FilterRowTitle\"> {this.props.data.label} </span>      \r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Node extends Component {\r\n  constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n      expanded: false\r\n        }\r\n    }\r\n\r\n  setExpanded = () => {\r\n    this.setState({expanded: !this.state.expanded})\r\n  }\r\n\r\n  toggle_node = () => {\r\n    if (!(this.props.disabled || this.props.disabled2)){\r\n      var add\r\n      if (this.props.enabled === \"full\"){\r\n        add = false\r\n      } else {\r\n        add = true\r\n      }\r\n      var children = []\r\n      this.props.children.forEach(child => {\r\n        if(\"children\" in child){\r\n          child.children.forEach(child2 => {\r\n            if(child2.enabled !== add){\r\n              children.push(child2.value)\r\n            }\r\n          })\r\n        } else {\r\n          if(child.enabled !== add){\r\n            children.push(child.value)\r\n          }\r\n        }\r\n      })\r\n      this.props.modify_enabled(add, children)\r\n    }\r\n  }\r\n  \r\n\r\n  render(){\r\n\r\n    var checkboxfill\r\n\r\n    if(this.props.enabled===\"full\"){\r\n      checkboxfill= <span className=\"NodeRowCheckboxTicked\"> <MdCheck style={{height: \"20px\", width: \"20px\"}}></MdCheck></span>\r\n    } \r\n    if(this.props.enabled===\"partial\"){\r\n      checkboxfill= <span className=\"NodeRowCheckboxPartial\"> <MdMinimize style={{height: \"20px\", width: \"20px\"}}></MdMinimize></span>\r\n    }\r\n    \r\n    var expandcontent\r\n    if(this.state.expanded){\r\n      expandcontent = <MdOutlineExpandMore style={{height: \"22px\", width: \"22px\"}}/>\r\n    } else {\r\n      expandcontent = <MdOutlineChevronRight style={{height: \"22px\", width: \"22px\"}}/>\r\n    }\r\n\r\n    var children = []\r\n    this.props.children.forEach(child => {\r\n      if (\"children\" in child){\r\n        var enabled = 0\r\n        child.children.forEach(child2 => {\r\n          if (this.props.enabled_values.includes(child2.value)){\r\n            enabled += 1\r\n            child2.enabled = true\r\n          } else {\r\n            child2.enabled = false\r\n          }\r\n        })\r\n        var enabled_string = \"partial\"\r\n        if(enabled === 0) {\r\n          enabled_string = \"none\"\r\n        } else if (enabled === child.children.length) {\r\n          enabled_string = \"full\"\r\n        } \r\n        children.push(<Node label = {child.label} key={child.label} img={child.img} enabled = {enabled_string} disabled2 = {this.props.disabled} children={child.children} modify_enabled={this.props.modify_enabled.bind(this)}></Node>)\r\n      } else {\r\n        children.push(<FilterItem data={child} modify_enabled={this.props.modify_enabled.bind(this)}/>)\r\n      }\r\n    })\r\n\r\n    var image_src =\"\"\r\n    if(\"img\" in this.props){\r\n      image_src = this.props.img\r\n    } else {\r\n      image_src = NodeImages[this.props.label]\r\n    }\r\n\r\n    return (\r\n      <div className={classNames(\"NodeRowContainer\", { \"NodeRowDisabled\": this.props.disabled })}>\r\n        <div className=\"NodeRow\">\r\n          <div className=\"NodeRowExpand\" onClick={this.setExpanded}>\r\n            {expandcontent}\r\n          </div>\r\n          <div className=\"NodeRowTop\" onClick={this.toggle_node}>\r\n            <span className=\"NodeRowCheckbox\">{checkboxfill}</span>\r\n            <img className=\"FilterRowImage\" src={\"icons/\"+image_src+\"_compass.png\"}/>\r\n            <span className=\"NodeRowTitle\"> {this.props.label} </span>      \r\n          </div>\r\n        </div>\r\n        <Collapse in={this.state.expanded}>\r\n          <div className=\"FilterRowContainer\">\r\n            {children}\r\n          </div>\r\n        </Collapse>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Filters extends Component {\r\n  constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n      enabled : [],\r\n        }\r\n    }\r\n\r\n  modify_enabled = (add, list) => {\r\n    if (add === true){\r\n      var new_enabled = this.state.enabled.concat(list)\r\n    } else {\r\n      var new_enabled = this.state.enabled.filter( ( el ) => !list.includes( el ) );\r\n    }\r\n    this.setState({enabled: new_enabled})\r\n    this.props.updateEnabled(new_enabled)\r\n    localStorage.setItem(\"NWMM_markers10\", JSON.stringify(new_enabled))\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    var setEnabled = false\r\n    if (\"enabled\" in this.props){  \r\n      if ((this.props.enabled !== null) && (this.props.enabled.length !== 0)){\r\n        this.setState({enabled: this.props.enabled})\r\n        setEnabled = true\r\n      } \r\n    }\r\n    if (setEnabled === false) {\r\n      var enabled_list = []\r\n      this.props.Nodes.forEach(node => {\r\n        if (node.value == \"town\"){\r\n          node.children.forEach(child => {\r\n            if(\"children\" in child){\r\n              child[\"children\"].forEach(item2 => {\r\n                enabled_list.push(item2.value)\r\n              })\r\n            } else {\r\n              enabled_list.push(child.value)\r\n            }\r\n            \r\n          })\r\n        }\r\n      })\r\n      this.setState({enabled: enabled_list})\r\n      this.props.updateEnabled(enabled_list)\r\n    }\r\n  }\r\n\r\n  componentDidUpdate =(prevProps, prevState) => {\r\n    if (this.props.enabled !== prevProps.enabled){\r\n            if (this.props.enabled !== this.state.enabled){\r\n                this.setState({enabled: this.props.enabled})\r\n            }\r\n        }\r\n  }\r\n\r\n render(){\r\n  var node_list = []\r\n  this.props.Nodes.forEach(node => {\r\n    var enabled = 0\r\n    var total = 0\r\n    if (![\"chests\", \"documents\", \"woods\"].includes(node.value)){\r\n      var disabled = true\r\n      if (node.value == \"town\"){\r\n        disabled = false\r\n      }\r\n      node.children.forEach(child => {\r\n        if(\"children\" in child){\r\n          child[\"children\"].forEach(child2 => {\r\n            total += 1\r\n            if (this.state.enabled.includes(child2.value)){\r\n              enabled += 1\r\n              child2.enabled = true\r\n            } else {\r\n              child2.enabled = false\r\n            }\r\n            child2.disabled = disabled\r\n\r\n          })\r\n        } else {\r\n          total += 1\r\n          if (this.state.enabled.includes(child.value)){\r\n            enabled += 1\r\n            child.enabled = true\r\n          } else {\r\n            child.enabled = false\r\n          }\r\n          child.disabled = disabled\r\n        }\r\n      \r\n      })\r\n      var enabled_string = \"partial\"\r\n      if(enabled === 0) {\r\n        enabled_string = \"none\"\r\n      } else if (enabled === total) {\r\n        enabled_string = \"full\"\r\n      } \r\n      node_list.push(<Node label = {node.label} key={node.label} disabled={disabled} enabled = {enabled_string} enabled_values={this.state.enabled} children={node.children} modify_enabled={this.modify_enabled.bind(this)}></Node>)\r\n    }\r\n  })\r\n\r\n\r\n  return (\r\n      <div className=\"FilterContainer\" >    \r\n        <div className=\"ShareLocationInfoRow\" style={{flexDirection: \"row\", textAlign:\"center\"}}> <span><MdInfoOutline style={{fontSize: \"18px\", marginRight:\"5px\"}}/>Filters have been disabled to comply with Amazon ToS. Compass data will be integrated ASAP!</span></div>    \r\n        {node_list}\r\n      </div>\r\n  );\r\n }\r\n  \r\n}\r\n\r\nexport default Filters;\r\n","import React, { Component } from 'react';\r\nimport Tooltip, { tooltipClasses } from '@mui/material/Tooltip';\r\nimport { styled } from '@mui/material/styles';\r\n\r\nconst ButtonTooltip = styled(({ className, ...props }) => (\r\n  <Tooltip {...props} arrow classes={{ popper: className }} />\r\n))(({ theme }) => ({\r\n  [`& .${tooltipClasses.arrow}`]: {\r\n    color: \"#070606\",\r\n  },\r\n  [`& .${tooltipClasses.tooltip}`]: {\r\n    backgroundColor: \"#070606\",\r\n    color: '#ABA9A6',\r\n  },\r\n}));\r\n\r\nexport default ButtonTooltip;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport ButtonTooltip from './ButtonTooltip'\r\n\r\nconst service_colors = {0: \"#dbdbdb\", 1: \"#38b322\", 2: \"#ba6f18\", 3:\"#cc1f1f\"}\r\n\r\nconst service_color_names = {0: \"Checking\", 1: \"Green\", 2: \"Amber\", 3:\"Red\"}\r\n\r\nconst service_message = {0: \"Checking Service Status\", \r\n1: \"Everything working properly\", \r\n2: \"Some In-game events are down, certain features may not work\", \r\n3: \"In-game events are down, position tracking & map data will not be available. We are aware and working to get it back up in the next 24 hours\"}\r\n\r\n// class EventsTooltip extends React.Component {\r\n//     constructor(props) {\r\n//       super(props);\r\n//       this.handleClick = this.handleClick.bind(this);\r\n//       this.toggle = this.toggle.bind(this);\r\n//       this.state = {\r\n//         hideControl: false,\r\n//         isOpen: false,\r\n//       };\r\n//     }\r\n  \r\n//     handleClick() {\r\n//       this.setState({\r\n//         hideControl: true,\r\n//       });\r\n//     }\r\n  \r\n//     toggle() {\r\n//       this.setState({ isOpen: !this.state.isOpen });\r\n//     }\r\n  \r\n  \r\n//     render() {\r\n//       return (\r\n//         <>\r\n  \r\n//           {!this.state.hideControl\r\n//             && (\r\n//             <Tooltip isOpen={this.state.isOpen} toggle={this.toggle} placement=\"top\" target={this.props.target} className=\"tooltip-right\" style={{ backgroundColor: '#212529', padding: 8 }}>\r\n//                 <div className=\"tooltip-header\"><b>Service Status: {service_color_names[this.props.status]}</b></div>\r\n//                 <div className=\"tooltip-description\" style={{fontSize: \"90%\", lineHeight: \"1.6\"}}>{service_message[this.props.status]}</div>\r\n//             </Tooltip>\r\n//             )}\r\n  \r\n//         </>\r\n//       );\r\n//     }\r\n//   }\r\n\r\nexport default class EventStatus extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state= {\r\n      status: 0,\r\n      message: \"fetching events status\",\r\n      details: []\r\n    } \r\n  }\r\n\r\n  componentDidMount = () => {\r\n    axios.get(\"https://game-events-status.overwolf.com/21816_prod.json\").then(response => {\r\n      if (\"state\" in response.data) {\r\n        this.setState({status: response.data.state})\r\n      }\r\n      if (\"features\" in response.data) {\r\n        var bad_events = []\r\n        response.data.features.forEach(feature => {\r\n          if (feature.state > 1){\r\n            bad_events.push(feature)\r\n          }\r\n        })\r\n        if (bad_events.length > 0){\r\n          this.setState({details: bad_events})\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"EventStatus\">\r\n        \r\n        <span>Service Status:</span>\r\n        <ButtonTooltip title={service_message[this.state.status]} placement=\"top\">\r\n          <div className=\"EventStatusIndicator\" id = \"EventStatusIndicator\" style={{backgroundColor: service_colors[this.state.status], boxShadow: \"0px 0px 4px 2px \"+service_colors[this.state.status]}}></div>\r\n        </ButtonTooltip>\r\n      </div>\r\n    )\r\n  }\r\n}","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\n// import HotkeysService from '../../common/services/hotkeys-service';\r\nimport DragService from '../../common/services/drag-service';\r\nimport WindowsService from '../../common/services/windows-service';\r\nimport { connect } from 'react-redux';\r\nimport '../../common/style.css';\r\nimport {FaDiscord} from 'react-icons/fa'\r\nimport {IoClose} from 'react-icons/io5'\r\nimport {MdOutlineHelp} from 'react-icons/md'\r\nimport Slider from '@mui/material/Slider';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport * as types from '../../actions/types';\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport FormLabel from '@mui/material/FormLabel';\r\nimport 'react-checkbox-tree/lib/react-checkbox-tree.css';\r\nimport { MdOutlineWarningAmber } from 'react-icons/md'\r\nimport { Scrollbars } from 'react-custom-scrollbars-2';\r\nimport Nodes from '../../data/nodes.json'\r\nimport TextField from '@mui/material/TextField';\r\nimport Box from '@mui/material/Box';\r\nimport { styled } from '@mui/material/styles';\r\nimport Toggle from 'react-toggle'\r\nimport \"react-toggle/style.css\" \r\nimport Filters from '../../components/Filters'\r\nimport Button from '@mui/material/Button';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport EventStatus from '../../components/EventStatus'\r\n\r\n\r\nconst SettingsTabs = styled(Tabs)({\r\n  '& .MuiTabs-indicator': {\r\n    backgroundColor: '#c2403c',\r\n  },\r\n});\r\n\r\nconst SettingsTab = styled((props) => <Tab {...props} />)(({ theme }) => ({\r\n  padding: '6px 20px',\r\n  margin: '6px',\r\n  fontFamily: \"Poppins\",\r\n  color: \"#d6d7d5\",\r\n  fontSize: 12,\r\n  '&:hover': {\r\n    color: '#eeefed',\r\n    opacity: 1,\r\n    outline: \"none\",\r\n  },\r\n  '&.Mui-selected': {\r\n    color: '#eeefed',\r\n    borderColor: '#c2403c',\r\n    outline: \"none\",\r\n  },\r\n  '&.Mui-focusVisible': {\r\n    borderColor: '#c2403c',\r\n    // backgroundColor: '#d1eaff',\r\n    outline: \"none\",\r\n  },\r\n}));\r\n\r\nconst AutoFollowMarks = [\r\n  {\r\n    value: 0,\r\n    label: 'Off Screen',\r\n  },\r\n  {\r\n    value: 0.1,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 0.2,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 0.3,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 0.4,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 0.5,\r\n    label: 'Always',\r\n  }\r\n];\r\n\r\nfunction AutoFollowSlider(AutoFollowChange, Frequency) {\r\n\r\n  return (\r\n      <Slider\r\n\t\tid = \"AutoFollowSlider\"\r\n\t\tkey = \"AutoFollowSlider\"\r\n        aria-label=\"AutoFollow\"\r\n        defaultValue={Frequency}\r\n        step={null}\r\n        marks={AutoFollowMarks}\r\n        min={0}\r\n        max={0.5}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {AutoFollowChange(value)}}\r\n      />\r\n  );\r\n}\r\n\r\n\r\n\r\nconst QuitButton = styled(Button)({\r\n  fontFamily: \"Poppins\",\r\n  fontSize: 12,\r\n  padding: '6px 20px',\r\n  margin: '6px',\r\n  border: '1px solid #c2403c',\r\n  color: \"#c2403c\",\r\n  lineHeight: 1.5,\r\n  transition: '0.3s cubic-bezier(.47,1.64,.41,.8)',\r\n  '&:hover': {\r\n    backgroundColor: '#434241',\r\n    borderColor: '#c2403c',\r\n    boxShadow: 'none',\r\n  },\r\n  '&:active': {\r\n    boxShadow: 'none',\r\n    backgroundColor: '#434241',\r\n    borderColor: '#c2403c',\r\n  },\r\n  '&:focus': {\r\n    borderColor: '#c2403c',\r\n    boxShadow: '0 0 0 0.2rem rgba(194,64,60,.5)',\r\n    outline: \"none\"\r\n  },\r\n  '&:disabled': {\r\n    color: \"#742624\",\r\n    borderColor: '#742624',\r\n    outline: \"none\"\r\n  },\r\n});\r\n\r\nconst CssTextField = styled(TextField)({\r\n  '& label.Mui-focused': {\r\n    color: '#c2403c',\r\n  },\r\n  '& .MuiInput-underline:after': {\r\n    borderBottomColor: '#c2403c',\r\n  },\r\n  '& .MuiOutlinedInput-root': {\r\n    '& fieldset': {\r\n      borderColor: '#333231',\r\n    },\r\n    '&:hover fieldset': {\r\n      borderColor: '#c2403c',\r\n    },\r\n    '&.Mui-focused fieldset': {\r\n      borderColor: '#c2403c',\r\n    },\r\n  },\r\n  '& .MuiInputBase-input': {\r\n    color: \"#eeefed\",\r\n  },\r\n  '&  .MuiInputLabel-root': {\r\n    color: \"#d6d7d5\",\r\n  }\r\n});\r\n\r\nconst OpacityMarks = [\r\n    {\r\n      value: 0.1,\r\n      label: '0.1',\r\n    },\r\n    {\r\n      value: 0.2,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 0.3,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 0.4,\r\n      label: '0.4',\r\n    },\r\n    {\r\n      value: 0.5,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 0.6,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 0.7,\r\n      label: '0.7',\r\n    },\r\n    {\r\n      value: 0.8,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 0.9,\r\n      label: '',\r\n    },\r\n    {\r\n      value: 1.0,\r\n      label: '1.0',\r\n    },\r\n  ];\r\n  \r\n\r\nfunction OpacitySlider(changeOpacity, updateOpacity, opacity) {\r\n\r\n  return (\r\n      <Slider\r\n\t\tid = \"OpacitySlider\"\r\n\t\tkey = \"OpacitySlider\"\r\n        aria-label=\"Opacity\"\r\n        defaultValue={opacity}\r\n        value = {opacity}\r\n        step={null}\r\n        marks={OpacityMarks}\r\n        min={0}\r\n        max={1}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {changeOpacity(value)}}\r\n        onChange ={(e, value) => {updateOpacity(value)}}\r\n      />\r\n  );\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state /*, ownProps*/) => {\r\n    return {\r\n        state\r\n    }\r\n};\r\n\r\n\r\nconst ZoomMarks = [\r\n  {\r\n    value: 2,\r\n    label: 'Zoomed In',\r\n  },\r\n  {\r\n    value: 3,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 4,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 5,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 6,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 7,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 8,\r\n    label: 'Zoomed Out',\r\n  },\r\n];\r\n\r\nconst SizeMarks = [\r\n    {\r\n      value: 200,\r\n      label: 'Small',\r\n    },\r\n    {\r\n      value: 250,\r\n      label: 'Medium',\r\n    },\r\n    {\r\n      value: 300,\r\n      label: 'Large',\r\n    },\r\n    {\r\n      value: 350,\r\n      label: 'Custom',\r\n    },\r\n  ];\r\n  \r\n  function BasicTextFields(keyPress) {\r\n    return (\r\n      <Box\r\n        component=\"form\"\r\n        sx={{\r\n          '& > :not(style)': { width: '20ch', },\r\n        }}\r\n        noValidate\r\n        autoComplete=\"off\"\r\n      >\r\n        <CssTextField id=\"size-input\" label=\"pixels\" variant=\"outlined\" size=\"small\" type=\"number\"\r\n         onKeyPress={(ev) => {\r\n          console.log(`Pressed keyCode ${ev.key}`);\r\n          if (ev.key === 'Enter') {\r\n            keyPress(ev)\r\n            ev.preventDefault();\r\n          }}}/>\r\n      </Box>\r\n    );\r\n  }\r\n  \r\n\r\nfunction SizeSlider(SizeChange, SizeUpdate, default_size) {\r\n  return (\r\n      <Slider\r\n\t\tid = \"SizeSlider\"\r\n\t\tkey = \"SizeSlider\"\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={default_size}\r\n        value={default_size}\r\n        step={null}\r\n        marks={SizeMarks}\r\n        min={200}\r\n        max={350}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '& .Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {SizeChange(value)}}\r\n        onChange ={(e, value) => {SizeUpdate(value)}}\r\n      />\r\n  );\r\n}\r\n\r\nfunction ZoomSlider(name, zoomStart, ZoomChange) {\r\n  return (\r\n      <Slider\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={zoomStart}\r\n        step={null}\r\n        marks={ZoomMarks}\r\n        min={2}\r\n        max={8}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {ZoomChange(value, name)}}\r\n      />\r\n  );\r\n}\r\n\r\nclass Settings extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this._dragService = null;\r\n        this._headerRef = React.createRef();\r\n\r\n        this.state = {\r\n            showhideText: '',\r\n            zoomInText: '',\r\n            zoomOutText: '',\r\n            default_size: 250, \r\n            toggle: false,\r\n            custom_size: false,\r\n            default_opacity: 1,\r\n            version: \"[calculating]\",\r\n\t\t\tcurrent_tab: \"minimap\"\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        var update = false\r\n        if (nextState !== this.state){\r\n            update = true\r\n        }\r\n        if (this.props.state.game.showhide != nextProps.state.game.showhide){\r\n            update = true\r\n            //this.setState({showhideText: nextProps.state.game.showhide})\r\n        } \r\n\t\tif (this.props.state.game.showhide2 != nextProps.state.game.showhide2){\r\n            update = true\r\n            //this.setState({showhideText: nextProps.state.game.showhide})\r\n        } \r\n        if (this.props.state.game.zoom_in != nextProps.state.game.zoom_in){\r\n            update = true\r\n            //this.setState({zoomInText: nextProps.state.game.zoom_in})\r\n        } \r\n        if (this.props.state.game.zoom_out != nextProps.state.game.zoom_out){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        if (this.props.state.game.circle != nextProps.state.game.circle){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        if (this.props.state.game.enabled_markers != nextProps.state.game.enabled_markers){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        if (this.props.state.game.opacity != nextProps.state.game.opacity){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n\t\tif (this.props.state.game.auto_follow_buffer != nextProps.state.game.auto_follow_buffer){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        return update\r\n    }\r\n\r\n    openURL = (url) => {\r\n        overwolf.utils.openUrlInOverwolfBrowser(url)\r\n    }\r\n\r\n     componentDidMount() {\r\n        // Make window draggable\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            this._dragService = new DragService(result.window, this._headerRef.current)\r\n        })\r\n        const zoomInText = this.props.state.game.zoom_in\r\n        const zoomOutText = this.props.state.game.zoom_out\r\n        const showhideText = this.props.state.game.showhide\r\n        \r\n        this.setState({zoomInText: zoomInText, zoomOutText: zoomOutText, showhideText: showhideText})\r\n\r\n        var default_size = localStorage.getItem(\"NWMM_size\")\r\n        if (default_size !== null){\r\n            this.setState({default_size: parseInt(default_size)})\r\n            if (default_size === \"350\"){\r\n                this.setState({custom_size: true})\r\n            }\r\n        }\r\n        if (this.props.state.game.opacity !== this.state.default_opacity){\r\n            this.setState({default_opacity: this.props.state.game.opacity})\r\n        }\r\n        overwolf.extensions.current.getManifest(app => {\r\n            if (app.success === true) {\r\n                this.setState({version: app.meta.version})\r\n            }\r\n        }) \r\n    }\r\n    \r\n    onCloseClicked = (event) => {\r\n        if (this.props.second_screen){\r\n            this.props.toggle_settings()\r\n        } else {\r\n            overwolf.windows.getCurrentWindow(result => {\r\n                if (result.success == true){\r\n                    overwolf.windows.close(result.window.id, ()=> {console.log(\"settings closed\")})\r\n                }\r\n            })\r\n        }\r\n    }\r\n    \r\n    updateHotkey(name, value) {\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    SizeUpdate = (value) => {\r\n        if (value !== this.state.default_size){\r\n            this.setState({default_size: value})\r\n        }\r\n    }\r\n\r\n    OpacityUpdate = (value) => {\r\n        if (value !== this.state.default_opacity){\r\n            this.setState({default_opacity: value})\r\n        }\r\n    }\r\n    \r\n    OpacityChange = (value) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.OPACITY, payload: value})\r\n        localStorage.setItem(\"NWMM_opacity\", value)\r\n    }\r\n\r\n\tAutoFollowChange = (value) => {\r\n\t\t// this.setState({CurrentSize: value})\r\n\t\tconst store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.AUTO_FOLLOW, payload: value})\r\n        localStorage.setItem(\"NWMM_auto_follow\", value)\r\n\t  }\r\n\t\r\n\r\n    handleShapeChange = (event) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.SHAPE, payload: event.target.value})\r\n        localStorage.setItem(\"NWMM_shape\", event.target.value)\r\n    }\r\n\r\n    updateEnabled = (new_enabled) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        // this.setState({enabled: new_enabled})\r\n        store.dispatch({type: types.ENABLED_MARKERS, payload: new_enabled})\r\n        localStorage.setItem(\"NWMM_markers10\", JSON.stringify(new_enabled))\r\n      }\r\n\r\n    SizeChange = (value) => {\r\n        //var scaling = window.devicePixelRatio\r\n        if (value < 350){\r\n            overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME, res => {\r\n                if (res.success === true){\r\n                    var window_id = res.window.id\r\n                    var change_size_params = {\r\n                        \"window_id\":window_id,\r\n                        // \"width\": Math.round(value*scaling),\r\n                        // \"height\": Math.round(value*scaling),\r\n                        \"width\": Math.round(value),\r\n                        \"height\": Math.round(value),\r\n                        // \"auto_dpi_resize\":true //relevant only for native windows\r\n                      }\r\n                    overwolf.windows.changeSize(change_size_params , console.log)\r\n                    //overwolf.windows.changeSize(window_id,  value, value, console.log)\r\n                }\r\n            })\r\n            if(this.state.custom_size == true){\r\n                this.setState({custom_size: false})\r\n              }\r\n        } else {\r\n            if(this.state.custom_size == false){\r\n                this.setState({custom_size: true})\r\n              }\r\n        }\r\n        localStorage.setItem(\"NWMM_size\", value)\r\n      }\r\n\r\n      CustomSizeEnter = (e) => {\r\n        console.log(e)\r\n        if(e.key === \"Enter\"){\r\n          console.log('value', e.target.value);\r\n          var value = e.target.value\r\n          overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME, res => {\r\n            if (res.success === true){\r\n                var window_id = res.window.id\r\n                var change_size_params = {\r\n                    \"window_id\":window_id,\r\n                    // \"width\": Math.round(value*scaling),\r\n                    // \"height\": Math.round(value*scaling),\r\n                    \"width\": Math.round(value),\r\n                    \"height\": Math.round(value),\r\n                    // \"auto_dpi_resize\":true //relevant only for native windows\r\n                  }\r\n                overwolf.windows.changeSize(change_size_params , console.log)\r\n                //overwolf.windows.changeSize(window_id,  value, value, console.log)\r\n            }\r\n        })\r\n          // put the login here\r\n        }\r\n      }\r\n\r\n      quitApp = () => {\r\n        WindowsService.QuitApp()\r\n      }\r\n    \r\n      togglemarkers=() => {\r\n        this.setState({toggle : !this.state.toggle})\r\n      }\r\n\r\n      ZoomChange = (value, type) => {\r\n        if (type==\"Town\"){\r\n          this.setState({TownZoom: value})\r\n        } else {\r\n            this.setState({WorldZoom: value})\r\n        }\r\n      }\r\n\r\n    handleRotation = (e) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.ROTATION, payload: e.target.checked})\r\n        localStorage.setItem(\"NWMM_rotation\", e.target.checked)\r\n      }\r\n\r\n      handleAutoHide = (e) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.AUTO_HIDE, payload: e.target.checked})\r\n        localStorage.setItem(\"NWMM_auto_hide\", e.target.checked)\r\n      }\r\n    \r\n\t  handleTabChange = (event, value) => {\r\n\t\tthis.setState({current_tab: value})\r\n\t  }\r\n\r\n     render(){\r\n\r\n        var settingsOverlayStyle={}\r\n        if(!this.state.toggle){\r\n         settingsOverlayStyle = {display: \"none\"}\r\n        }\r\n\r\n        var custom_size_row\r\n        if (this.state.custom_size){\r\n         custom_size_row =               \r\n         <div className=\"settingsRow\">\r\n           <span>Custom Size</span>\r\n           <span className=\"SizeBox\">{BasicTextFields(this.CustomSizeEnter)}</span>\r\n         </div>\r\n        }\r\n\r\n\t\tvar minimap_settings =    \r\n\t\t<div className=\"settingsSection\">\r\n\t\t\t<div className=\"settingsHeader\">\r\n\t\t\tMinimap Settings\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t<span>Size</span>\r\n\t\t\t<span className=\"sliderBox\">{SizeSlider(this.SizeChange, this.SizeUpdate, this.state.default_size)}</span>\r\n\t\t\t</div>\r\n\t\t\t{custom_size_row}\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t<span>Opacity</span>\r\n\t\t\t<span className=\"sliderBox\">{OpacitySlider(this.OpacityChange, this.OpacityUpdate, this.state.default_opacity)}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t<span>Auto-Hide <span className=\"settingsSubtitle\"> - hide map in menus (press {this.props.state.game.showhide} to show again)</span></span>\r\n\t\t\t<span className=\"toggleBox\"><Toggle onChange={this.handleAutoHide} defaultChecked={this.props.state.game.auto_hide}/></span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t<span>Rotate Map <span className=\"settingsSubtitle\"> - Rotate the map instead of player</span></span>\r\n\t\t\t<span className=\"toggleBox\"><Toggle onChange={this.handleRotation} defaultChecked={this.props.state.game.compass_mode}/></span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t<span>Shape</span>\r\n\t\t\t<span>\r\n\t\t\t<FormControl component=\"fieldset\">\r\n\t\t\t\t<RadioGroup row aria-label=\"shape\" name=\"row-radio-buttons-group\" value={this.props.state.game.circle} onChange={this.handleShapeChange} \r\n\t\t\t\tsx={{\r\n\t\t\t\tcolor: '#c2403c',\r\n\t\t\t\t'& .MuiRadio-root': {\r\n\t\t\t\t\tcolor: \"#c2403c !important\",\r\n\t\t\t\t\t'&:hover, &.Mui-focusVisible': {\r\n\t\t\t\t\tboxShadow: `0px 0px 0px 4px rgba(194, 64, 60, 0.19)`,\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'& .Mui-active': {\r\n\t\t\t\t\tboxShadow: `0px 0px 0px 6px rgba(194, 64, 60, 0.19)`,\r\n\t\t\t\t\tcolor: \"#c2403c\",\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'& .MuiTypography-root': {\r\n\t\t\t\t\tcolor: \"#d6d7d5\",\r\n\t\t\t\t\tfontSize: \"12px\",\r\n\t\t\t\t},\r\n\t\t\t\t'&.Mui-checked': {\r\n\t\t\t\t\tcolor: \"#c2403c\",\r\n\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<FormControlLabel value=\"true\" control={<Radio />} label=\"Circle\" />\r\n\t\t\t\t<FormControlLabel value=\"false\" control={<Radio />} label=\"Square\" />\r\n\t\t\t\t</RadioGroup>\r\n\t\t\t</FormControl>\r\n\t\t\t</span>\r\n\t\t\t</div>\r\n      <div className=\"ShareLocationInfoRow\" style={{flexDirection: \"row\"}}> <span><MdOutlineWarningAmber style={{fontSize: \"18px\"}} /> Note: We have removed support for OCR mode. If you are having issues with position detection, please exit Overwolf (from the system tray) and the game. Start Overwolf, then load into the game, and it should work again</span></div>\r\n\t\t</div>\r\n\r\n\tvar main_map_settings =           \r\n\t\t<div className=\"settingsSection\">\r\n\t\t\t<div className=\"settingsHeader\">\r\n\t\t\t\tFull Screen Map Settings\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t\t<span>Auto Follow Frequency</span>\r\n\t\t\t\t<span className=\"sliderBox\">{AutoFollowSlider(this.AutoFollowChange, this.props.state.game.auto_follow_buffer)}</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsRow\">\r\n\t\t\t\t<div className=\"ShareLocationInfoRow\" style={{flexDirection: \"row\"}}> <span><MdOutlineWarningAmber style={{fontSize: \"18px\"}} /> More frequent Auto Follow will consume high amounts of CPU and may cause framerate issues</span></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\tvar hotkey_settings = \r\n\t<div className=\"settingsSection\">\r\n\t\t<div className=\"settingsHeader\">\r\n\t\tHotkeys <span className=\"settingsSubtitle\"> - click to reassign</span>\r\n\t\t</div>\r\n\t\t<div className=\"settingsRow\">\r\n\t\t<span>Show/Hide Minimap</span>\r\n\t\t<a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_showhide&gameId=21816\"><span className=\"settingsHotkey\">{this.props.state.game.showhide}</span></a>\r\n\t\t</div>\r\n\t\t<div className=\"settingsRow\">\r\n\t\t<span>Show/Hide Main Map</span>\r\n\t\t<a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_showhide2&gameId=21816\"><span className=\"settingsHotkey\">{this.props.state.game.showhide2}</span></a>\r\n\t\t</div>\r\n\t\t<div className=\"settingsRow\">\r\n\t\t<span>Zoom in</span>\r\n\t\t<a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_zoom_in&gameId=21816\"><span className=\"settingsHotkey\">{this.props.state.game.zoom_in}</span></a>\r\n\t\t</div>\r\n\t\t<div className=\"settingsRow\">\r\n\t\t<span>Zoom out</span>\r\n\t\t<a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_zoom_out&gameId=21816\"><span  className=\"settingsHotkey\">{this.props.state.game.zoom_out}</span></a>\r\n\t\t</div>\r\n    <div className=\"settingsRow\">\r\n\t\t<span>Stream Location</span>\r\n    <a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_locationstream&gameId=21816\"><span  className=\"settingsHotkey\">{this.props.state.game.locationstream}</span></a>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\tvar about = \r\n\t\t<div className=\"settingsSection\" style={{marginBottom: \"2px\"}}>\r\n\t\t\t<div className=\"settingsHeader\">\r\n\t\t\tAbout\r\n\t\t\t</div>\r\n\t\t\t<div className=\"settingsAbout\">\r\n\t\t\t\t<div className=\"settingsAboutRow\">New World MiniMap (NWMM) is a project from two friends to stop us getting lost in cities and make resource gathering while questing more efficient.</div>\r\n\t\t\t\t<div className=\"settingsAboutRow\">Map data comes with permission from www.newworld-map.com - please <span className=\"settingsHotkey\" onClick={() => {this.openURL(\"https://www.newworld-map.com/#/\")}}>check them out</span> and contribute to mapping New World.</div>\r\n\t\t\t\t<div className=\"settingsAboutRow\">Any issues, want to give us feedback or suggest new features? Join our <span className=\"settingsHotkey\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}}>Discord Community</span> and send us a message.</div>\r\n\t\t\t\t<div className=\"settingsAboutRow\" style={{marginTop: \"8px\"}}>&copy; {new Date().getFullYear()} NewWorldMiniMap.com New World MiniMap is not affiliated with New World or Amazon Game Studios in any way. App version {this.state.version}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\tvar filters = \r\n\t  <div style={{flex: \"1 1 0\", width: \"100%\", minHeight: 0}}>\r\n\t\t\t<Scrollbars>\r\n\t\t\t\t<div className=\"settingsHeader\">\r\n\t\t\t\tFilters\r\n\t\t\t\t</div>\r\n\t\t\t\t<Filters Nodes={Nodes} updateEnabled={this.updateEnabled.bind(this)} enabled = {this.props.state.game.enabled_markers}/>\r\n\t\t\t</Scrollbars>\r\n\t\t</div>\r\n\r\n\t\tvar tab_content = {\r\n\t\t\t\"minimap\": minimap_settings,\r\n\t\t\t\"mainmap\": main_map_settings,\r\n\t\t\t\"filters\": filters,\r\n\t\t\t\"hotkeys\": hotkey_settings,\r\n\t\t\t\"about\": about,\r\n\t\t}\r\n        // console.log('Settings window redux state', this.props.state)\r\n      return (\r\n            <div className=\"SettingsContainer\" >\r\n              <header className=\"app-header\" ref={this._headerRef}>\r\n                <div className=\"app-icon\">\r\n                  <img src=\"IconMouseNormal.png\" style={{height: 30, width: 30}} draggable=\"false\"/>\r\n                  <span style={{fontSize: \"18px\"}}>New World MiniMap - Settings</span>\r\n                </div>\r\n                <div className=\"window-controls-group\">\r\n                <button className=\"icon window-control discord\" id=\"discordButton\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}} >\r\n                    <FaDiscord style={{height: \"18px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control help\" id=\"helpButton\" onClick={() => {this.openURL(\"https://www.newworldminimap.com/help\")}} >\r\n                    <MdOutlineHelp style={{height: \"20px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control window-control-close\" id=\"closeButton\" onClick={this.onCloseClicked}>\r\n                    <IoClose/>\r\n                  </button>\r\n                </div>\r\n              </header>\r\n\t\t\t  <SettingsTabs\r\n\t\t\t\t\tvalue={this.state.current_tab}\r\n\t\t\t\t\tonChange={this.handleTabChange}\r\n\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<SettingsTab value=\"minimap\" label=\"Mini Map\" />\r\n\t\t\t\t\t<SettingsTab value=\"mainmap\" label=\"Main Map\" />\r\n\t\t\t\t\t<SettingsTab value=\"filters\" label=\"Filters\" />\r\n\t\t\t\t\t<SettingsTab value=\"hotkeys\" label=\"Hotkeys\" />\r\n\t\t\t\t\t<SettingsTab value=\"about\" label=\"About\" />\r\n\t\t\t\t</SettingsTabs>\r\n\t\t\t\t<div className=\"settingsContent\">\r\n\t\t\t\t\t{tab_content[this.state.current_tab]}\r\n\t\t\t\t\t<div className=\"settingsRowCentered\">\r\n            \r\n            <EventStatus/>\r\n            \r\n\t\t\t\t\t\t<QuitButton> Quit App </QuitButton>\r\n\t\t\t\t\t</div> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Settings);","const PlayerColours = [\"#FF8080\", \"#7CDDF7\", \"#DED16F\", \"#CC66C9\", \"#5DBAAC\", \"#F2A279\", \"#7182E3\", \"#92D169\", \"#BF607C\", \"#7CDDF7\"]\r\n\r\nexport default PlayerColours;","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Markers from '../data/coords2.json'\r\nimport NameMappings from '../data/name_mapping.json'\r\nimport { FaMinus, FaPlus, FaCog, FaRegMap, FaRegCompass } from 'react-icons/fa' //FaInfo\r\nimport {MdOutlineLocationSearching, MdOutlineMyLocation, MdOpenInBrowser} from 'react-icons/md'\r\nimport DragService from '../common/services/drag-service';\r\nimport WindowsService from '../common/services/windows-service';\r\nimport WindowNames from '../common/constants/window-names';\r\nimport Nodes from '../data/nodes2.json'\r\nimport {Icon, Style, Text, Fill, Stroke} from 'ol/style';\r\nimport 'ol/ol.css';\r\nimport Map from 'ol/Map';\r\nimport Projection from 'ol/proj/Projection';\r\nimport Feature from 'ol/Feature';\r\nimport VectorSource from 'ol/source/Vector';\r\nimport Point from 'ol/geom/Point';\r\nimport { buffer, containsCoordinate} from 'ol/extent';\r\nimport View from 'ol/View';\r\nimport {Image as ImageLayer, Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\r\nimport {linear} from 'ol/easing';\r\nimport XYZ from 'ol/source/XYZ';\r\nimport MousePosition from 'ol/control/MousePosition';\r\nimport {createStringXY} from 'ol/coordinate';\r\nimport ButtonTooltip from './ButtonTooltip'\r\nimport * as types from '../actions/types'\r\nimport PlayerColours from '../common/constants/colours'\r\nimport {containsExtent} from 'ol/extent';\r\n\r\n\r\nconst WORLD_ZOOM_TYPE = 'world_zoom'\r\nconst CITY_ZOOM_TYPE = 'city_zoom'\r\nconst FULLSCREEN_ZOOM_TYPE = 'fullscreen_zoom'\r\n\r\nconst MIN_ZOOM = 2\r\nconst MAX_ZOOM = 8\r\n\r\nconst y_scale = 0.000408856\r\nconst y_offset = 6143.7-2\r\n\r\nconst x_scale = 0.000408767\r\nconst x_offset = 8192.2\r\n\r\nvar iconStyles = {}\r\n\r\nfunction getIconScale(baseZoom, imageSrc) {\r\n  if((imageSrc == \"/icons/document_compass.png\") || (imageSrc.startsWith(\"/icons/hotspot\"))){\r\n    return baseZoom * 0.6\r\n  } else if (imageSrc.startsWith(\"/icons/honey\")){\r\n    return baseZoom * 0.8\r\n  } else {\r\n    return baseZoom\r\n  }\r\n}\r\n\r\nfunction initIconStyles(zoom) {\r\n  const base_scale = zoom/6.6-0.3\r\n  for (const node in Nodes){\r\n    \r\n    Nodes[node][\"children\"].forEach(item => {\r\n      if (\"children\" in item) {\r\n        item[\"children\"].forEach(item2 => {\r\n          // console.log(`Setting icon style for ${item2.image_name} -> ${item2.name}`)\r\n          var imgSrc = '/icons/'+item2.image_name+'_compass.png'\r\n          iconStyles[item2.name] = new Style({\r\n            image: new Icon({\r\n              anchor: [0.5, 0.5],\r\n              anchorXUnits: 'fraction',\r\n              anchorYUnits: 'fraction',\r\n              src: imgSrc,\r\n              scale: getIconScale(base_scale, imgSrc),\r\n              name: item2.name,\r\n            }),\r\n          });\r\n        })\r\n      } else {\r\n        // console.log(`Setting icon style for ${item.image_name} -> ${item.name}`)\r\n        var imgSrc = '/icons/'+item.image_name+'_compass.png'\r\n        iconStyles[item.name] = new Style({\r\n          image: new Icon({\r\n            anchor: [0.5, 0.5],\r\n            anchorXUnits: 'fraction',\r\n            anchorYUnits: 'fraction',\r\n            src: imgSrc,\r\n            scale: getIconScale(base_scale, imgSrc),\r\n            name: item.name,\r\n          }),\r\n        });\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction updateIconScales(zoom) {\r\n  if (Object.keys(iconStyles).length === 0) {\r\n     initIconStyles(zoom);\r\n     return;\r\n  }\r\n  const base_scale = zoom/6.6-0.3\r\n  for(let style in iconStyles) {\r\n    let imgSrc = iconStyles[style].getImage().getSrc()\r\n    let scale = getIconScale(base_scale, imgSrc)\r\n    iconStyles[style].getImage().setScale(scale)\r\n  }\r\n}\r\n\r\nconst city_boundaries = {\r\n  CK: {y_min: 1830, y_max: 2008, x_min: 7850, x_max: 8014},\r\n  FL: {y_min: 621, y_max: 808, x_min: 8750, x_max: 8940},\r\n  WW: {y_min: 2596, y_max: 2795, x_min: 9255, x_max: 9421},\r\n  EF: {y_min: 4150, y_max: 4290, x_min: 8815, x_max: 9016},\r\n  MB: {y_min: 3620, y_max: 3804, x_min: 7280, x_max: 7449},\r\n  RW: {y_min: 3213, y_max: 3386, x_min: 10900, x_max: 11085},\r\n  RS: {y_min: 4372, y_max: 4527, x_min: 12900, x_max: 13060},\r\n  MD: {y_min: 6875, y_max: 7068, x_min: 13085, x_max: 13284},\r\n  WF: {y_min: 5242, y_max: 5403, x_min: 11370, x_max: 11506},\r\n  BW: {y_min: 6258, y_max: 6449, x_min: 9490, x_max: 9681},\r\n  ER: {y_min: 5310, y_max: 5477, x_min: 7176, x_max: 7351},\r\n  VH: {y_min: 7277, y_max: 7343, x_min: 11103, x_max: 11173},\r\n  LS: {y_min: 8488, y_max: 8544, x_min: 12048, x_max: 12108},\r\n  EB: {y_min: 7480, y_max: 7548, x_min: 10037, x_max: 10082},\r\n  CP: {y_min: 7907, y_max: 7984, x_min: 8814, x_max: 8907},\r\n  MH: {y_min: 9176, y_max: 9260, x_min: 9024, x_max: 9093},\r\n  MR: {y_min: 10288, y_max: 10363, x_min: 8888, x_max: 8962},\r\n}\r\n\r\nclass MiniMap extends Component {\r\n  errors = 0\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this._headerRef = React.createRef();\r\n        this.state = {\r\n      stopped: false,\r\n      marker_limit: false,\r\n      tracking: true,\r\n      // Note: props.coords also contains position + rotation from store\r\n      // But use these state variables as validated source of truth\r\n      position: [0, 0],\r\n      rotation: 0,\r\n        }\r\n    this.map = null\r\n    this.map_markers = {}\r\n    this.player_marker = null\r\n    this.MAX_MARKERS = 2000\r\n    this.player_positions = {}\r\n    //bit longer than update rate for smoothness\r\n    this.animation_length = 700\r\n    this.otherPlayerFeatures = {}\r\n    this.connected_player_num = 0\r\n    }\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    if (this.props.enabled_markers !== prevProps.enabled_markers) {\r\n      this.updateMarkers()\r\n    }\r\n    if (this.props.coords !== prevProps.coords) {\r\n      this.updatePosition(this.props.coords)\r\n    }\r\n    if (this.props.connectedPlayers != prevProps.connectedPlayers) {\r\n      // this.updatePlayerMarkers()\r\n    }\r\n    if (!this.props.second_screen) {\r\n      // minimap only logic\r\n      if (this.props.compass_mode!== prevProps.compass_mode){\r\n        if(this.props.compass_mode){\r\n          document.getElementById('PlayerIcon').style.transform = \"rotate(\" +  String(0) + \"deg)\"\r\n        } else {\r\n          var view = this.map.getView()\r\n          view.animate(\r\n            {\r\n              rotation: 0,\r\n              duration: 50,\r\n            }    \r\n          );\r\n        }\r\n      }\r\n      if(this.props.circle !== prevProps.circle){\r\n        this.toggleShape(this.props.circle)\r\n      }\r\n    } else {\r\n      // second screen only logic\r\n      const trackedPlayer = this.props.connectedPlayers[this.props.tracked_player]\r\n      // console.log(trackedPlayer && trackedPlayer.name !== this.props.playerName)\r\n      // If player being tracked is changed\r\n      if (this.props.tracked_player !== prevProps.tracked_player) {\r\n        var new_coords\r\n        if (trackedPlayer && trackedPlayer.name !== this.props.playerName) {\r\n          new_coords = trackedPlayer.position\r\n        } else {\r\n          new_coords = this.props.coords\r\n        }\r\n\r\n        if (new_coords !== null){\r\n          //if new_coords same as old coords, but tracking changed, then move screen anyway\r\n          if (this.state.tracking === false){\r\n            this.setState({tracking: true},  () => {this.updateView(new_coords)})\r\n          } else {\r\n            this.updateView(new_coords)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        // If coordinates of tracked player are updated\r\n        let prevPosition = prevProps.connectedPlayers[this.props.tracked_player]?.position;\r\n        if (trackedPlayer && prevPosition && trackedPlayer.position[0] !== prevPosition[0] && trackedPlayer.position[1] !== prevPosition[1] && trackedPlayer.position[2] !== prevPosition[2] && trackedPlayer.name !== this.props.playerName) {\r\n          this.updateView(trackedPlayer.position)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Called when the map has moved\r\n  onMapViewChangeEnd_prevZoom = -1\r\n  onMapViewChangeEnd = () => {\r\n    const current_view = this.map.getView()\r\n    var zoom = current_view.getZoom();\r\n\r\n    var isMouseWheelZoomIncr = (this.onMapViewChangeEnd_prevZoom < zoom) && (this.zoom() < zoom)\r\n    var isMouseWheelZoomDecr = (this.onMapViewChangeEnd_prevZoom > zoom) && (this.zoom() > zoom)\r\n    if (zoom != this.onMapViewChangeEnd_prevZoom) {\r\n      console.log(`Map view zoom changed ${this.onMapViewChangeEnd_prevZoom} -> ${zoom}`)\r\n      this.updateMarkers();\r\n      this.onMapViewChangeEnd_prevZoom = zoom;\r\n    }\r\n    if (isMouseWheelZoomIncr || isMouseWheelZoomDecr) {\r\n      console.log(\"Zoom level changed\");\r\n      this.setZoom({level: zoom}, false)\r\n    }\r\n    this.maybeUpdateMarkers()\r\n  }\r\n\r\n  renderedMarkersExtent = [0, 0, 0, 0]\r\n  maybeUpdateMarkers = () => {\r\n    const current_view = this.map.getView()\r\n    const viewableExtent = current_view.calculateExtent(this.map.getSize())\r\n    if (!containsExtent(this.renderedMarkersExtent, viewableExtent))\r\n    {\r\n      this.updateMarkers();\r\n    }\r\n  }\r\n\r\n  updateMarkers = () => {\r\n    console.log(\"Updating markers\");\r\n    var startTime = performance.now()\r\n\r\n    const current_view = this.map.getView()\r\n    const center =  current_view.getCenter()\r\n    const bounds = current_view.calculateExtent(this.map.getSize())\r\n    const buffer_amount = (bounds[2]-bounds[0])*0.15 // Enlarge the extent by 15%\r\n    const buffered_bounds = buffer(bounds, buffer_amount);\r\n    let features_to_add = []\r\n    let num_markers = 0\r\n    let marker_limit_reached = false\r\nouter_loop:\r\n    for (let key in Markers) {\r\n      for (const item_name in Markers[key]) {\r\n        var item_dict = Markers[key][item_name]\r\n        var mapped_name = item_name\r\n        if (item_name in NameMappings) {\r\n          mapped_name = NameMappings[item_name].name\r\n          var mapped_image_name = NameMappings[item_name].value\r\n          \r\n          if (this.props.enabled_markers.includes(mapped_name)) {\r\n\r\n            for (const item in item_dict) {\r\n              let mapPos = toMapCoords([item_dict[item].x, item_dict[item].y]);\r\n              if (!containsCoordinate(buffered_bounds, mapPos))\r\n                continue;\r\n              var newMarker = new Feature({\r\n                geometry: new Point(mapPos),\r\n                name: mapped_name\r\n              });\r\n              newMarker.setStyle(iconStyles[mapped_name])\r\n              features_to_add.push(newMarker)\r\n              num_markers += 1\r\n\r\n              // Break clause, never load more than MAX_MARKERS markers\r\n              if (num_markers >= this.MAX_MARKERS){\r\n                marker_limit_reached = true;\r\n                break outer_loop\r\n              }     \r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (this.state.marker_limit !== marker_limit_reached){\r\n      this.setState({marker_limit: marker_limit_reached})\r\n    }\r\n    //clear current features\r\n    this.vectorSource.clear(true)\r\n    // add all features in one go\r\n    this.vectorSource.addFeatures(features_to_add)\r\n    this.renderedMarkersExtent = buffered_bounds\r\n    var endTime = performance.now()\r\n    console.log(`Enabled ${num_markers} markers in ${endTime-startTime} milliseconds`)\r\n  }\r\n\r\n  \r\n  updatePlayerMarkers = () => {\r\n    for (let playerId in this.props.connectedPlayers) {\r\n      let { name: playerName, position: [x, y, rotation] } = this.props.connectedPlayers[playerId]\r\n      //comment out next line for debugging\r\n      // if (playerName === this.props.playerName) continue;\r\n      if (!(playerId in this.otherPlayerFeatures)) {\r\n        const feature = this.createPlayerFeatureMarker(this.connected_player_num, playerName)\r\n        this.playerVector.addFeature(feature)\r\n        this.otherPlayerFeatures[playerId] = feature\r\n        this.otherPlayerFeatures[playerId].getGeometry().setCoordinates(toMapCoords([x, y]))\r\n        this.otherPlayerFeatures[playerId].style_.getImage().setRotation((90-rotation)*Math.PI/180);\r\n        this.otherPlayerFeatures[playerId].changed()\r\n        this.connected_player_num += 1\r\n      }\r\n      this.updatePlayerPosition([x, y, rotation], playerId)\r\n    }\r\n\r\n    // Delete unneeded features\r\n    for (let playerId in this.otherPlayerFeatures) {\r\n      if (!(playerId in this.props.connectedPlayers)) {\r\n        this.playerVector.removeFeature(this.otherPlayerFeatures[playerId])\r\n        delete this.otherPlayerFeatures[playerId]\r\n        delete this.player_positions[playerId]\r\n        this.connected_player_num -= 1\r\n      }\r\n    }\r\n  }\r\n\r\n  createPlayerFeatureMarker(num, playerName) {\r\n    var player_number = num\r\n    if(player_number > (PlayerColours.length-1)){\r\n      player_number = player_number%(PlayerColours.length)\r\n    }\r\n\r\n    const playerMarkerStyle = new Style({\r\n      image: new Icon({\r\n        anchor: [0.5, 0.5],\r\n        anchorXUnits: 'fraction',\r\n        anchorYUnits: 'fraction',\r\n        color: PlayerColours[player_number],\r\n        src: '/icons/player.png',\r\n        scale: 0.5,\r\n        rotation: 0,\r\n        rotateWithView: true,\r\n        name: playerName,\r\n      }),\r\n      text: new Text({\r\n        offsetY: 20,\r\n        font: '12px Poppins',\r\n        fill: new Fill({ color: '#f0f0f0' }),\r\n        stroke: new Stroke({\r\n          color: '#333', width: 1\r\n        }),\r\n        // get the text from the feature - `this` is ol.Feature\r\n        // and show only under certain resolution\r\n        text: playerName\r\n      })\r\n\r\n    })\r\n    let feature = new Feature({\r\n      geometry: new Point([0, 0]),\r\n    });\r\n    feature.setStyle(playerMarkerStyle)\r\n    return feature;\r\n  }\r\n\r\n  isInCity = ([x,y]) => {\r\n    for (const city in city_boundaries){\r\n      if ((x < city_boundaries[city].x_max) && (x > city_boundaries[city].x_min)){\r\n        if ((y < city_boundaries[city].y_max) && (y > city_boundaries[city].y_min)) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  toggleShape = (value) => {\r\n    var border_radius=\"0%\"\r\n    if (value === \"true\"){\r\n      border_radius=\"50%\"\r\n    }\r\n    var elements = document.querySelectorAll(\".ol-viewport\");\r\n    elements[0].style.borderRadius = border_radius; \r\n  }\r\n\r\n  // Handle incoming position update from store\r\n  updatePosition = ([x, y, rotation]) => {\r\n    var dx = x - this.state.position[0]\r\n    var dy = y - this.state.position[1]\r\n    var distance = Math.sqrt(dx*dx + dy*dy);\r\n    // Catch large magnitude changes\r\n    if (distance > 20 && this.errors < 3) {\r\n      this.errors += 1\r\n      return\r\n    }\r\n    this.errors = 0\r\n\r\n    // Update zoom type for minimap\r\n    var desired_zoom_type = (() => {\r\n      if (this.isMini())\r\n        return this.isInCity([x,y]) ? CITY_ZOOM_TYPE : WORLD_ZOOM_TYPE;\r\n      else\r\n        return FULLSCREEN_ZOOM_TYPE;\r\n    })();\r\n    if (desired_zoom_type != this.zoom_type) {\r\n      this.setZoom({type: desired_zoom_type})\r\n    }\r\n\r\n    const positionChanged = (distance > 0);\r\n\r\n    // In OCR mode, we estimate the rotation based on movement\r\n    if (positionChanged && rotation === null) {\r\n      rotation = Math.atan2(dy,dx) * 180 / Math.PI\r\n\r\n      // Pick the manifestation of rotation such that abs(rotation-prev_rotation) <= 180\r\n      // Helps with averaging angles + css transform animation around discontinuity point\r\n      while (rotation - this.state.rotation < -180)\r\n        rotation += 360\r\n      while (rotation - this.state.rotation > 180)\r\n        rotation -= 360\r\n\r\n      // Average with previous to achieve some smoothing\r\n      rotation = (this.state.rotation + rotation*3) / 4\r\n    }\r\n\r\n    const rotationChanged = (rotation !== this.state.rotation)\r\n\r\n    if (positionChanged || rotationChanged){\r\n      const trackedPlayer = this.props.connectedPlayers[this.props.tracked_player]\r\n      if (!trackedPlayer || trackedPlayer.name == this.props.playerName || (this.props.second_screen === false)) {\r\n        this.updateView([x, y, rotation])\r\n      }\r\n    }\r\n    if(this.props.second_screen === true){\r\n      this.updatePlayerPosition([x, y, rotation], \"player_self\")\r\n    }\r\n    this.setState({\r\n      position: [x, y],\r\n      rotation: rotation,\r\n    });\r\n    this.updateStoppedState(positionChanged);\r\n  }\r\n\r\n  // Set state.stopped to whether the player has moved in the last 2.1 seconds\r\n  last_moved_time = Date.now()\r\n  updateStoppedState(positionChanged) {\r\n    let now = Date.now()\r\n    if (positionChanged) {\r\n      this.last_moved_time = now\r\n    }\r\n\r\n    let isStopped = (now - this.last_moved_time > 2100)\r\n    if (isStopped !== this.state.stopped) {\r\n      console.log(`setting stopped: ${isStopped}`)\r\n      this.setState({stopped: isStopped})\r\n    }\r\n  }\r\n\r\n  // Animate the map view to the specified location\r\n  updateView = ([x, y, rotation]) => {\r\n    const view = this.map.getView()\r\n\r\n    var duration = 500\r\n    if (!this.props.second_screen) {\r\n      this.maybeUpdateMarkers()\r\n      if(this.props.compass_mode){\r\n        view.animate(\r\n          {\r\n            rotation: (rotation-90)*Math.PI/180,\r\n            duration: duration,\r\n            center: toMapCoords([x, y]),\r\n          }\r\n        );\r\n      } else{\r\n        view.animate({\r\n          duration: duration,\r\n          center: toMapCoords([x, y]),\r\n          easing: linear,\r\n        })\r\n        document.getElementById('PlayerIcon').style.transform = \"rotate(\" +  String(90-rotation) + \"deg)\"\r\n      }\r\n    } else {\r\n      if(this.state.tracking === true){\r\n        var buffer_percent = this.props.auto_follow_buffer\r\n        var bounds = view.calculateExtent(this.map.getSize())\r\n        //if current position within x% of edge\r\n        var new_bounds = [0, 0, 0, 0]\r\n        new_bounds[0] = bounds[0]+(bounds[2]-bounds[0])*buffer_percent\r\n        new_bounds[2] = bounds[2]-(bounds[2]-bounds[0])*buffer_percent\r\n  \r\n        new_bounds[1] = bounds[1]-(bounds[1]-bounds[3])*buffer_percent\r\n        new_bounds[3] = bounds[3]+(bounds[1]-bounds[3])*buffer_percent\r\n        if (!containsCoordinate(new_bounds, toMapCoords([x, y]))){\r\n          view.animate({\r\n            center: toMapCoords([x, y]),\r\n            duration: 500,\r\n            easing: linear\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePlayerPosition = ([x, y, rotation], playerId) => {\r\n    if(typeof this.player_positions  !== \"undefined\") {\r\n      if (!(playerId in this.player_positions)){\r\n        this.player_positions[playerId] = {x: x, y: y, rotation: rotation, animating: false}\r\n      } else {\r\n        if ((this.player_positions[playerId].x === x) && (this.player_positions[playerId].y === y) && (this.player_positions[playerId].rotation === rotation)){\r\n          this.player_positions[playerId].animating = false\r\n        } else {\r\n          var prev_x, prev_y\r\n          if (playerId === \"player_self\"){ \r\n            [prev_x, prev_y] = toGameCoords(this.playerIcon.getGeometry().getCoordinates())\r\n          }\r\n          else if (playerId in this.otherPlayerFeatures){\r\n            [prev_x, prev_y] = toGameCoords(this.otherPlayerFeatures[playerId].getGeometry().getCoordinates())\r\n          } else {\r\n            prev_x =  this.player_positions[playerId].x\r\n            prev_y =  this.player_positions[playerId].y\r\n          }\r\n          if ((prev_x !== null) && (prev_y !== null)){\r\n            this.player_positions[playerId].animating = true\r\n            this.player_positions[playerId].prev_x = prev_x\r\n            this.player_positions[playerId].prev_y = prev_y\r\n            this.player_positions[playerId].prev_rotation = this.player_positions[playerId].rotation\r\n            this.player_positions[playerId].x = x\r\n            this.player_positions[playerId].y = y\r\n            this.player_positions[playerId].rotation = rotation\r\n            this.player_positions[playerId].animate_start = Date.now()\r\n            //trigger rerender to start animation\r\n            if (playerId === \"player_self\"){ \r\n              this.playerIcon.changed()\r\n            }\r\n            else if (playerId in this.otherPlayerFeatures){\r\n              this.otherPlayerFeatures[playerId].changed()\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n//        \r\n  animatePlayerPosition = () => { \r\n    if(typeof this.player_positions  !== \"undefined\") {\r\n      // console.log(\"animating1\", this.player_positions)\r\n      for (var playerId in this.player_positions){\r\n        if (this.player_positions[playerId].animating === true){\r\n          // console.log(\"animating2\", this.player_positions[playerId])\r\n          // console.log(playerId)\r\n          // console.log(this.otherPlayerFeatures)\r\n          var duration_so_far = Date.now() - this.player_positions[playerId].animate_start\r\n          var animation_percentage = Math.min(duration_so_far/this.animation_length, 1)\r\n          var new_x = this.player_positions[playerId].prev_x + animation_percentage*(this.player_positions[playerId].x - this.player_positions[playerId].prev_x)\r\n          var new_y = this.player_positions[playerId].prev_y + animation_percentage*(this.player_positions[playerId].y - this.player_positions[playerId].prev_y)\r\n          var new_rotation = this.player_positions[playerId].prev_rotation + animation_percentage*(this.player_positions[playerId].rotation - this.player_positions[playerId].prev_rotation)\r\n          if (playerId === \"player_self\"){\r\n            this.player_icon_style.getImage().setRotation((90-new_rotation)*Math.PI/180);\r\n            this.playerIcon.getGeometry().setCoordinates(toMapCoords([new_x, new_y]))\r\n            this.playerIcon.changed()\r\n          } else {\r\n            if (playerId in this.otherPlayerFeatures){\r\n              this.otherPlayerFeatures[playerId].getGeometry().setCoordinates(toMapCoords([new_x, new_y]))\r\n              this.otherPlayerFeatures[playerId].style_.getImage().setRotation((90-new_rotation)*Math.PI/180);\r\n              this.otherPlayerFeatures[playerId].changed()\r\n            }\r\n          }\r\n        }\r\n      }  \r\n    }\r\n  }\r\n\r\n  zoom = () => {\r\n    return this.zoomLevel[this.zoom_type];\r\n  }\r\n\r\n  // Set the zoom to a specific value\r\n  setZoom = ({type, level}, updateView=true) => {\r\n    if (typeof type !== \"undefined\") {\r\n      console.log(`Changing zoom type ${this.zoom_type} -> ${type}`)\r\n      this.zoom_type = type\r\n    }\r\n    if (typeof level !== \"undefined\") {\r\n      if (level > MAX_ZOOM) level = MAX_ZOOM\r\n      if (level < MIN_ZOOM) level = MIN_ZOOM\r\n      console.log(`Changing ${this.zoom_type} ${this.zoomLevel[this.zoom_type]} -> ${level}`)\r\n      this.zoomLevel[this.zoom_type] = level\r\n      localStorage.setItem(this.zoom_type, level)\r\n    }\r\n    updateIconScales(this.zoom())\r\n    if (updateView) {\r\n      this.map.getView().animate({\r\n        zoom: this.zoom(),\r\n        duration: 200,\r\n        easing: linear,\r\n      })\r\n    }\r\n  }\r\n\r\n  zoomIn = () => {\r\n    var zoom_level = this.zoom() + 0.5;\r\n    this.setZoom({level: zoom_level})\r\n  }\r\n\r\n  zoomOut = () => {\r\n    var zoom_level = this.zoom() - 0.5;\r\n    this.setZoom({level: zoom_level})\r\n  }\r\n\r\n  toggleMap = () => {\r\n    WindowsService.toggleMap()\r\n  }\r\n\r\n  toggleMiniMap = () => {\r\n    WindowsService.toggle_ingame()\r\n  }\r\n\r\n  toggleSettings = () => {\r\n    if (this.props.second_screen === true){\r\n      this.props.toggle_settings()\r\n    } else {\r\n      WindowsService.restore(WindowNames.SETTINGS)\r\n    }\r\n  }\r\n\r\n  streamLocation = () => {\r\n    //add location streaming code\r\n    WindowsService.openBrowser()\r\n  }\r\n\r\n  \r\n  toggleTracking =() => {\r\n      // if not tracking the player, then set to tracking the player\r\n      if ((this.props.tracked_player !== \"\") && (this.props.tracked_player !== this.props.playerName)) {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.TRACK_PLAYER, payload: \"\"})\r\n      } else {\r\n        var next_tracking = !this.state.tracking\r\n        this.setState({tracking: next_tracking})\r\n        if(next_tracking === true){\r\n          //center on player\r\n          if ((this.state.position[0] !== 0) && (this.state.position[1] !== 0)){\r\n            var view = this.map.getView()\r\n            view.animate({\r\n              duration: 200,\r\n              center: toMapCoords(this.state.position),\r\n              easing: linear,\r\n            })\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n  unTrack = () => {\r\n    if (this.state.tracking === true){\r\n      this.setState({tracking: false})\r\n      if (this.props.tracked_player !== \"[untracked]\") {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        store.dispatch({type: types.TRACK_PLAYER, payload: \"[untracked]\"})\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var world_zoom_level = parseFloat(localStorage.getItem(WORLD_ZOOM_TYPE))\r\n    if (isNaN(world_zoom_level)){\r\n      world_zoom_level = 6\r\n    }\r\n    var city_zoom_level = parseFloat(localStorage.getItem(CITY_ZOOM_TYPE))\r\n    if (isNaN(city_zoom_level)){\r\n      city_zoom_level = 7\r\n    }\r\n    var full_screen_zoom_level = parseFloat(localStorage.getItem(FULLSCREEN_ZOOM_TYPE))\r\n    if (isNaN(full_screen_zoom_level)){\r\n      full_screen_zoom_level = 5\r\n    }\r\n\r\n    this.zoomLevel = {\r\n      [WORLD_ZOOM_TYPE]: world_zoom_level,\r\n      [CITY_ZOOM_TYPE]: city_zoom_level,\r\n      [FULLSCREEN_ZOOM_TYPE]: full_screen_zoom_level,\r\n    }\r\n\r\n    if(this.props.second_screen === true){\r\n      this.MAX_MARKERS = 4000\r\n    }\r\n\r\n    this.playerVector = new VectorSource({\r\n      features: [],\r\n    })\r\n\r\n    this.playerVectorLayer = new VectorLayer({\r\n      source: this.playerVector,\r\n      renderMode: \"vector\",\r\n      updateWhileAnimating: true,\r\n      updateWhileInteracting: true,\r\n    });\r\n    this.playerVectorLayer.setZIndex(1000);\r\n\r\n    if(this.props.second_screen === true){\r\n      this.player_icon_style = new Style({\r\n        image: new Icon({\r\n          anchor: [0.5, 0.5],\r\n          anchorXUnits: 'fraction',\r\n          anchorYUnits: 'fraction',\r\n          src: '/icons/player.png',\r\n          scale: [0.5 , 0.5],\r\n          name: \"Player\",\r\n        }),\r\n      });\r\n\r\n      this.playerIcon = new Feature({\r\n        geometry: new Point(toMapCoords(this.props.coords.slice(0, 2))),\r\n        name: \"Player\"\r\n      });\r\n      this.playerIcon.setStyle(this.player_icon_style)\r\n      this.playerVector.addFeature(this.playerIcon)\r\n    }\r\n\r\n    this.vectorSource = new VectorSource({\r\n      features: [],\r\n    });\r\n    \r\n    this.vectorLayer = new VectorLayer({\r\n      source: this.vectorSource,\r\n      renderMode: \"vector\",\r\n      updateWhileAnimating: true,\r\n      updateWhileInteracting: true,\r\n    });\r\n\r\n    const layers = [\r\n      new TileLayer({\r\n        source: new XYZ({\r\n        url: 'https://cdn.newworldminimap.com/file/nwminimap/{z}/{x}/{y}.png',\r\n        minZoom: MIN_ZOOM,\r\n        maxZoom: MAX_ZOOM,\r\n        }),\r\n      }),\r\n      this.vectorLayer,\r\n      this.playerVectorLayer,\r\n    ]\r\n\r\n    if (this.isMini()) {\r\n      this.setZoom({type: WORLD_ZOOM_TYPE}, false)\r\n    } else {\r\n      this.setZoom({type: FULLSCREEN_ZOOM_TYPE}, false)\r\n    }\r\n    this.view = new View({\r\n      center: toMapCoords(this.props.coords.slice(0, 2)), //[-472202, 7530279],\r\n      zoom: this.zoom(),\r\n    })\r\n\r\n    this.map = new Map({\r\n      target: 'mapid',\r\n      layers: layers,\r\n      // controls: defaultControls().extend([mousePositionControl]),\r\n      view: this.view,\r\n    });\r\n\r\n    if (this.isMini()) {\r\n      overwolf.windows.getCurrentWindow(result => {\r\n        this._dragService = new DragService(result.window, this._headerRef.current)\r\n      })\r\n      if(this.props.circle === \"true\"){\r\n        this.toggleShape(\"true\")\r\n      }\r\n      overwolf.settings.hotkeys.onPressed.addListener((res) => {\r\n        console.log(`Hotkey event: ${res}`)\r\n        if (res[\"name\"] === \"nwmm_zoom_in\") {\r\n          this.zoomIn()\r\n        }\r\n        if (res[\"name\"] === \"nwmm_zoom_out\") {\r\n          this.zoomOut()\r\n        }\r\n      })\r\n    } else {\r\n      this.toggleShape(\"false\")\r\n    }\r\n\r\n    this.map.on('postrender', this.animatePlayerPosition)\r\n    this.map.on('moveend', this.onMapViewChangeEnd);\r\n    this.map.on('pointerdrag', this.unTrack);\r\n\r\n    this.updateMarkers()\r\n    // this.updatePlayerMarkers()\r\n  }\r\n\r\n render() {\r\n  // console.log(\"Rendering MiniMap component.\")\r\n  \r\n  // console.log(\"map props: \", this.props)\r\n\r\n  var buttons\r\n  var MapOverlayClassName = \"MapOverlay\"\r\n  var MapContainerStyle = {cursor: \"default\"}\r\n  if ((this.props.circle == \"true\") && (this.props.second_screen === false)){\r\n    buttons = [\r\n      <ButtonTooltip title=\"Settings\" placement=\"right\">\r\n      <div className=\"MapButton1\" style={{fontSize: \"12px\"}} onClick={this.toggleSettings} key=\"MapButton1\">\r\n        <FaCog/>\r\n      </div>\r\n    </ButtonTooltip>,\r\n    <ButtonTooltip title=\"Zoom In\" placement=\"right\">\r\n      <div className=\"MapButton2\" onClick={this.zoomIn} key=\"MapButton2\">\r\n        <FaPlus/>\r\n      </div>\r\n    </ButtonTooltip>,\r\n    <ButtonTooltip title=\"Zoom Out\" placement=\"right\">\r\n      <div className=\"MapButton3\" onClick={this.zoomOut} key=\"MapButton3\">\r\n        <FaMinus/>\r\n      </div>\r\n    </ButtonTooltip>,\r\n    <ButtonTooltip title=\"Full Screen Map\" placement=\"right\">\r\n      <div className=\"MapButton4\" onClick={this.toggleMap}>\r\n        <FaRegMap/>\r\n      </div>\r\n   </ButtonTooltip>,\r\n    <ButtonTooltip title=\"Stream Location\" placement=\"right\">\r\n      <div className=\"MapButton5\" onClick={this.streamLocation}>\r\n        <MdOpenInBrowser/>\r\n      </div>\r\n    </ButtonTooltip>\r\n    ]\r\n    MapOverlayClassName = \"MapOverlayCircle\"\r\n    MapContainerStyle.borderRadius = \"50%\"\r\n  } else {\r\n    if (!this.props.second_screen){\r\n      buttons =         \r\n      <div className=\"MapButtons\">\r\n        <ButtonTooltip title=\"Settings\" placement=\"right\">\r\n          <div className=\"MapButton\" style={{fontSize: \"12px\"}} onClick={this.toggleSettings} >\r\n            <FaCog/>\r\n          </div>\r\n        </ButtonTooltip >\r\n        <ButtonTooltip title=\"Zoom In\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.zoomIn}>\r\n            <FaPlus/>\r\n          </div>\r\n        </ButtonTooltip >\r\n        <ButtonTooltip title=\"Zoom Out\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.zoomOut}>\r\n            <FaMinus/>\r\n          </div>\r\n        </ButtonTooltip>\r\n        <ButtonTooltip title=\"Full Screen Map\" placement=\"right\">\r\n            <div className=\"MapButton\" onClick={this.toggleMap}>\r\n            <FaRegMap/>\r\n          </div>\r\n        </ButtonTooltip>\r\n        <ButtonTooltip title=\"Stream Location\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.streamLocation}>\r\n            <MdOpenInBrowser/>\r\n          </div>\r\n        </ButtonTooltip>\r\n      </div>\r\n    }\r\n    else {\r\n      var following_player_icon\r\n      if(this.state.tracking === true){\r\n        following_player_icon = <MdOutlineMyLocation style={{color: \"#cfcfcf\"}}/>\r\n      } else {\r\n        following_player_icon = <MdOutlineLocationSearching style={{color: \"#c2403c\"}}/>\r\n      }\r\n      buttons =         \r\n      <div className=\"MapButtons\">\r\n        <ButtonTooltip title=\"Settings\" placement=\"right\">\r\n          <div className=\"MapButton\" style={{fontSize: \"12px\"}} onClick={this.toggleSettings} >\r\n            <FaCog/>\r\n          </div>\r\n        </ButtonTooltip >\r\n        <ButtonTooltip title=\"Zoom In\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.zoomIn}>\r\n            <FaPlus style={{fontSize: \"12px\"}}/>\r\n          </div>\r\n        </ButtonTooltip >\r\n        <ButtonTooltip title=\"Zoom Out\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.zoomOut}>\r\n            <FaMinus style={{fontSize: \"12px\"}}/>\r\n          </div>\r\n        </ButtonTooltip>\r\n        <ButtonTooltip title=\"Toggle Minimap\" placement=\"right\">\r\n            <div className=\"MapButton\" onClick={this.toggleMiniMap}>\r\n            <FaRegCompass />\r\n          </div>\r\n        </ButtonTooltip>\r\n        <ButtonTooltip title=\"Follow Player\" placement=\"right\">\r\n            <div className=\"MapButton\" onClick={this.toggleTracking}>\r\n            {following_player_icon}\r\n          </div>\r\n        </ButtonTooltip>\r\n        <ButtonTooltip title=\"Stream Location\" placement=\"right\">\r\n          <div className=\"MapButton\" onClick={this.streamLocation}>\r\n            <MdOpenInBrowser/>\r\n          </div>\r\n        </ButtonTooltip>\r\n      </div>\r\n    }\r\n  }\r\n  var opacity = this.props.opacity\r\n  var MapBorderClassName = \"MapBorder\"\r\n  var MapErrorClassName = \"MapError\"\r\n  var player_icon\r\n  if (this.props.second_screen !== true){\r\n    player_icon = <img id=\"PlayerIcon\" src=\"/icons/player.png\"/>\r\n    // if(this.props.auto_hide === true){\r\n    //   if (this.state.stopped === true){\r\n    //     if (opacity > 0.3){\r\n    //       opacity = opacity-0.3\r\n    //     }\r\n    //   }\r\n    // }\r\n  } else {\r\n    opacity = 1\r\n    MapOverlayClassName = \"MapOverlay2\"\r\n    MapBorderClassName = \"MapBorder2\"\r\n    MapErrorClassName = \"MapError2\"\r\n  }\r\n\r\n  var overlaycontent\r\n  if (this.props.error === true){\r\n    overlaycontent = <div className={MapErrorClassName}>[ERROR]: Can't detect coordinates with OCR. Ensure \"Show FPS\" is enabled in game and you are fullscreen at native resolution, or enable API mode. \r\n    <div>You can press {this.props.showhide} to show/hide the map </div></div>\r\n  }\r\n\r\n  var MapBorderStyle = {opacity: opacity}\r\n\r\n  var marker_limit_warning\r\n  if(this.state.marker_limit === true){\r\n    marker_limit_warning = <div className=\"MarkerLimitWarning\"> Marker limit reached ({this.MAX_MARKERS} markers). Zoom in or apply some filters</div>\r\n  }\r\n\r\n  return (\r\n      <div className={MapBorderClassName} style={MapBorderStyle}>\r\n        <div className=\"MapContainer\" id = \"mapid\" style={MapContainerStyle}></div>\r\n        {buttons}\r\n        <div className={MapOverlayClassName} ref={this._headerRef}>{overlaycontent}</div>\r\n        {player_icon}\r\n        {marker_limit_warning}\r\n      </div>\r\n  );\r\n }\r\n\r\n  isMini = () => {\r\n    return (!this.props.second_screen)\r\n  }\r\n}\r\n\r\n// Convert in-game coords to map coords\r\nfunction toMapCoords([x, y]) {\r\n  return [ (x-x_offset)/x_scale, (y-y_offset)/y_scale ]\r\n}\r\n\r\nfunction toGameCoords([x, y]) {\r\n  return [ (x*x_scale+x_offset), (y*y_scale+y_offset)]\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { connectedPlayers } = state.group\r\n  const { coords, error, showhide, circle, enabled_markers, opacity, auto_hide, rotation, compass_mode, playerName, tracked_player, auto_follow_buffer } = state.game\r\n  return { connectedPlayers, coords, error, showhide, circle, enabled_markers, opacity, auto_hide, rotation, compass_mode, playerName, tracked_player, auto_follow_buffer }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MiniMap);\r\n","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport WindowsService from '../../common/services/windows-service';\r\nimport DragService from '../../common/services/drag-service';\r\nimport MiniMap from '../../components/MiniMap.js'\r\nimport '../../common/style.css';\r\n\r\nclass InGame extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this._dragService = null;\r\n\r\n\r\n        this.state = {\r\n            imgSrc: null\r\n        }\r\n\r\n        this._eventListener = this._eventListener.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        let mainWindow = overwolf.windows.getMainWindow();\r\n        mainWindow.ow_eventBus.addListener(this._eventListener);\r\n    }\r\n\r\n    _eventListener(eventName, data) {\r\n        switch (eventName) {\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    onCloseClicked(event) {\r\n        WindowsService.minimize(WindowNames.IN_GAME);\r\n    }\r\n\r\n    onSettingsClicked(event) {\r\n        WindowsService.restore(WindowNames.SETTINGS);\r\n    }\r\n\r\n  render() {\r\n    return (\r\n        <div className=\"in-game-div\">\r\n            <div style={{marginRight: \"3.5%\", marginBottom: \"3.5%\", width: \"100%\", height: \"96.5%\"}}>\r\n                <MiniMap second_screen = {false}/>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InGame;\r\n","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\n// import HotkeysService from '../../common/services/hotkeys-service';\r\nimport DragService from '../../common/services/drag-service';\r\nimport { connect } from 'react-redux';\r\nimport '../../common/style.css';\r\nimport {FaDiscord} from 'react-icons/fa'\r\nimport {IoClose} from 'react-icons/io5'\r\nimport {MdOutlineHelp} from 'react-icons/md'\r\nimport Slider from '@mui/material/Slider';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport * as types from '../../actions/types';\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport FormControl from '@mui/material/FormControl';\r\n\r\nconst mapStateToProps = (state /*, ownProps*/) => {\r\n    return {\r\n        state\r\n    }\r\n};\r\n\r\n\r\nconst ZoomMarks = [\r\n  {\r\n    value: 2,\r\n    label: 'Zoomed In',\r\n  },\r\n  {\r\n    value: 3,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 4,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 5,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 6,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 7,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 8,\r\n    label: 'Zoomed Out',\r\n  },\r\n];\r\n\r\nconst SizeMarks = [\r\n  {\r\n    value: 200,\r\n    label: 'Small',\r\n  },\r\n  {\r\n    value: 250,\r\n    label: 'Medium',\r\n  },\r\n  {\r\n    value: 300,\r\n    label: 'Large',\r\n  },\r\n];\r\n\r\nfunction SizeSlider(SizeChange, SizeUpdate, default_size) {\r\n  return (\r\n      <Slider\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={default_size}\r\n        value={default_size}\r\n        step={null}\r\n        marks={SizeMarks}\r\n        min={200}\r\n        max={300}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {SizeChange(value)}}\r\n        onChange ={(e, value) => {SizeUpdate(value)}}\r\n      />\r\n  );\r\n}\r\n\r\nfunction ZoomSlider(name, zoomStart, ZoomChange) {\r\n  return (\r\n      <Slider\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={zoomStart}\r\n        step={null}\r\n        marks={ZoomMarks}\r\n        min={2}\r\n        max={8}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {ZoomChange(value, name)}}\r\n      />\r\n  );\r\n}\r\n\r\nclass Desktop extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this._dragService = null;\r\n        this._headerRef = React.createRef();\r\n\r\n        this.state = {\r\n            showhideText: '',\r\n            zoomInText: '',\r\n            zoomOutText: '',\r\n            default_size: 250, \r\n            version: \"[calculating]\",\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        var update = false\r\n        if (nextState !== this.state){\r\n            update = true\r\n        }\r\n        if (this.props.state.showhide != nextProps.state.game.showhide){\r\n            update = true\r\n            //this.setState({showhideText: nextProps.state.game.showhide})\r\n        } \r\n        if (this.props.state.zoom_in != nextProps.state.game.zoom_in){\r\n            update = true\r\n            //this.setState({zoomInText: nextProps.state.game.zoom_in})\r\n        } \r\n        if (this.props.state.zoom_out != nextProps.state.game.zoom_out){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        return update\r\n    }\r\n\r\n    openURL = (url) => {\r\n        overwolf.utils.openUrlInDefaultBrowser(url)\r\n    }\r\n\r\n     componentDidMount() {\r\n        // Make window draggable\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            this._dragService = new DragService(result.window, this._headerRef.current)\r\n        })\r\n        const zoomInText = this.props.state.game.zoom_in\r\n        const zoomOutText = this.props.state.game.zoom_out\r\n        const showhideText = this.props.state.game.showhide\r\n        \r\n        this.setState({zoomInText: zoomInText, zoomOutText: zoomOutText, showhideText: showhideText})\r\n\r\n        var default_size = localStorage.getItem(\"NWMM_size\")\r\n        if (default_size !== null){\r\n            this.setState({default_size: parseInt(default_size)})\r\n        }\r\n        overwolf.extensions.current.getManifest(app => {\r\n            if (app.success === true) {\r\n                this.setState({version: app.meta.version})\r\n            }\r\n        }) \r\n    }\r\n    \r\n    onCloseClicked(event) {\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            if (result.success == true){\r\n                overwolf.windows.close(result.window.id, ()=> {console.log(\"settings closed\")})\r\n            }\r\n        })\r\n    }\r\n    \r\n    updateHotkey(name, value) {\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    SizeUpdate = (value) => {\r\n        if (value !== this.state.default_size){\r\n            this.setState({default_size: value})\r\n        }\r\n    }\r\n\r\n    SizeChange = (value) => {\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME, res => {\r\n            if (res.success === true){\r\n                var window_id = res.window.id\r\n                var change_size_params = {\r\n                    \"window_id\":window_id,\r\n                    \"width\":value,\r\n                    \"height\":value,\r\n                    \"auto_dpi_resize\":true //relevant only for native windows\r\n                  }\r\n                overwolf.windows.changeSize(change_size_params ,console.log)\r\n            }\r\n        })\r\n        localStorage.setItem(\"NWMM_size\", value)\r\n      }\r\n    \r\n      ZoomChange = (value, type) => {\r\n        if (type==\"Town\"){\r\n          this.setState({TownZoom: value})\r\n        } else {\r\n            this.setState({WorldZoom: value})\r\n        }\r\n      }\r\n    \r\n     render(){\r\n        // console.log('Settings window redux state', this.props.state)\r\n      return (\r\n            <div className=\"settings\" >\r\n              <header className=\"app-header\" ref={this._headerRef}>\r\n                <div className=\"app-icon\">\r\n                  <img src=\"IconMouseNormal.png\" style={{height: 30, width: 30}} draggable=\"false\"/>\r\n                  <span style={{fontSize: \"18px\"}}>New World MiniMap</span>\r\n                </div>\r\n                <div className=\"window-controls-group\">\r\n                <button className=\"icon window-control discord\" id=\"discordButton\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}} >\r\n                    <FaDiscord style={{height: \"18px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control help\" id=\"helpButton\" onClick={() => {this.openURL(\"https://www.newworldminimap.com/help\")}} >\r\n                    <MdOutlineHelp style={{height: \"20px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control window-control-close\" id=\"closeButton\" onClick={this.onCloseClicked}>\r\n                    <IoClose/>\r\n                  </button>\r\n                </div>\r\n              </header>\r\n              <div className=\"settingsContent\">\r\n                <div className=\"settingsSection\">\r\n                  <div className=\"desktopImg\">\r\n                    <img src=\"IconMouseOver.png\" draggable=\"false\" style={{height: \"80px\"}}></img>\r\n                  </div>\r\n                  <div className=\"settingsAbout\">\r\n                    <div className=\"settingsAboutRow\">Thanks for downloading New World MiniMap! Feel free to close this window, the minimap will automatically open when you load into game.</div>\r\n                </div>\r\n                  {/* <div className=\"settingsRow\">\r\n                    <span>Open World Default Zoom</span>\r\n                    <span className=\"sliderBox\">{ZoomSlider(\"World\", 4, this.ZoomChange)}</span>\r\n                  </div>\r\n                  <div className=\"settingsRow\">\r\n                    <span>In Town Default Zoom</span>cdn\r\n                    <span  className=\"sliderBox\">{ZoomSlider(\"Town\", 2, this.ZoomChange)}</span>\r\n                  </div> */}\r\n                </div>\r\n                <div className=\"settingsSection\">\r\n                  <div className=\"settingsHeader\">\r\n                    Hotkeys <span className=\"settingsSubtitle\"> - click to reassign</span>\r\n                  </div>\r\n                  <div className=\"settingsRow\">\r\n                    <span>Show/Hide Minimap</span>\r\n                    <a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_showhide&gameId=21816\"><span className=\"settingsHotkey\">{this.props.state.game.showhide}</span></a>\r\n                  </div>\r\n                  <div className=\"settingsRow\">\r\n                    <span>Zoom in</span>\r\n                    <a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_zoom_in&gameId=21816\"><span className=\"settingsHotkey\">{this.props.state.game.zoom_in}</span></a>\r\n                  </div>\r\n                  <div className=\"settingsRow\">\r\n                    <span>Zoom out</span>\r\n                    <a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_zoom_out&gameId=21816\"><span  className=\"settingsHotkey\">{this.props.state.game.zoom_out}</span></a>\r\n                  </div>\r\n                </div>\r\n                <div className=\"settingsSection\" style={{marginBottom: \"2px\"}}>\r\n                  <div className=\"settingsHeader\">\r\n                    About\r\n                  </div>\r\n                  <div className=\"settingsAbout\">\r\n                    <div className=\"settingsAboutRow\">New World MiniMap (NWMM) is a project from two friends to stop us getting lost in cities and make resource gathering while questing more efficient.</div>\r\n                    <div className=\"settingsAboutRow\">Map data comes with permission from www.newworld-map.com - please <span className=\"settingsHotkey\" onClick={() => {this.openURL(\"https://www.newworld-map.com/#/\")}}>check them out</span> and contribute to mapping New World.</div>\r\n                    <div className=\"settingsAboutRow\">Any issues, want to give us feedback or suggest new features? Join our <span className=\"settingsHotkey\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}}>Discord Community</span> and send us a message.</div>\r\n                    <div className=\"settingsAboutRow\" style={{marginTop: \"8px\"}}>&copy; {new Date().getFullYear()} NewWorldMiniMap.com New World MiniMap is not affiliated with New World or Amazon Game Studios in any way. App version {this.state.version}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Desktop);","/* global OwAd */\r\n/* global overwolf */\r\n\r\nimport React from 'react';\r\n// import windowsService from '../common/services/windows-service';\r\n\r\nconst names_to_windows = {\"second_screen\": \"second_screen\", \r\n                          \"ingame_full\": \"ingame_full\", \r\n                          \"loading\": \"loading\"}\r\n  \r\nexport default class AdBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state= {\r\n      hidden: false\r\n    } \r\n    this.owAd = null\r\n  }\r\n\r\n  shouldComponentUpdate = (nextProps, nextState) => {\r\n    var update = false\r\n    if(this.props.supporter !== nextProps.supporter){\r\n      if(nextProps.supporter.status === true){\r\n        console.log(\"supporter, removing ad\")\r\n        setTimeout(() => {this.deleteAd(0)}, 1500)\r\n      } else {\r\n        if ((nextProps.supporter.type !== \"Checking\") && (nextProps.supporter.type !== \"Overwolf_Checked\")){\r\n          setTimeout(() => {this.createAd()}, 200)\r\n        }\r\n      }\r\n      update = true\r\n    }\r\n    return update\r\n  }\r\n\r\n  refreshAd = () => {\r\n    console.log(\"refreshing ad\")\r\n    if (this.owAd !== null){\r\n      console.log(\"Refreshing ad\")\r\n      this.owAd.refreshAd()\r\n    }\r\n  }\r\n\r\n  deleteAd = (retries) => {\r\n    var ad_removed = false\r\n    if (this.owAd !== null){\r\n      if (typeof window.owAdReference !== 'undefined') {\r\n        console.log(\"removing ad\")\r\n        this.owAd.removeAd()\r\n        this.owAd = null\r\n        window.owAdReference = null;\r\n        ad_removed = true\r\n      }\r\n    } \r\n    if (ad_removed === false) {\r\n        retries +=1\r\n        console.log(\"could not remove ad, retrying: \", retries)\r\n        if (retries < 5){\r\n          setTimeout(() => {\r\n            this.deleteAd(retries)\r\n          }, 2000);\r\n        }\r\n      }\r\n    \r\n  }\r\n\r\n  removeAd = (retries) => {\r\n    console.log(\"removing ad\")\r\n    if (this.owAd !== null){\r\n      this.owAd.removeAd()\r\n    } else {\r\n      retries +=1\r\n      if (retries < 5){\r\n        setTimeout(() => {\r\n          this.removeAd(retries)\r\n        }, 2000);\r\n      }\r\n    }\r\n  }\r\n  \r\n  createAd = (counter) => {\r\n    console.log(\"creating ad\")\r\n    if(this.props.supporter.status === true){\r\n      return\r\n    }\r\n    if (typeof OwAd !== \"undefined\") {\r\n      if (typeof window.owAdReference === 'undefined') {\r\n        this.owAd = new OwAd(document.getElementById(this.props.ad_name), {size: {width: 400, height: 300}});\r\n        window.owAdReference = this.owAd;\r\n      } else {\r\n        this.owAd = window.owAdReference;\r\n        this.refreshAd();\r\n      }\r\n    } else {\r\n      counter +=1\r\n      if (counter < 20){\r\n        setTimeout(() => {\r\n          this.createAd(counter)\r\n        }, 1000);\r\n      } else {\r\n        console.log(\"20 reattempts, couldn't load add\")\r\n      }\r\n    }\r\n  }\r\n\r\n  AltTabListener (event) {\r\n    console.log(\"Alt tab detected: \", event)\r\n    if (event.focusChanged === true){\r\n      if (event.gameInfo.title === \"New World\"){\r\n        //var window_name = names_to_windows[this.props.ad_name]\r\n        if (event.gameInfo.isInFocus === false) {\r\n          console.log(\"Minimizing, removing ad\")\r\n          this.removeAd(0);\r\n          //WindowsService.MinimizeAll()\r\n        } else if (event.gameInfo.isInFocus === true) {\r\n          if(!this.state.hidden){\r\n            if (\"supporter\" in this.props) {\r\n              if(this.props.supporter.status !== true){\r\n                this.refreshAd();\r\n                return\r\n              }\r\n            }\r\n          }\r\n          // WindowsService.RestoreAll()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n onWindowStateChanged(state) {\r\n    console.log(`Window state changed: ${JSON.stringify(state)}`);\r\n    if(state) {\r\n      // when state changes to minimized, call removeAd()\r\n      if (state.window_name === this.props.ad_name){\r\n        if ((state.window_state === \"minimized\") || (state.window_state === \"hidden\") || (state.window_state === \"closed\")){\r\n          this.removeAd(0);\r\n          this.setState({hidden: true})\r\n        }\r\n        // when state changes from minimized to normal, call refreshAd()\r\n        else if(state.window_state === \"normal\"){\r\n          this.setState({hidden: false})\r\n          if(this.props.supporter.status !== true){\r\n            this.refreshAd();\r\n            return\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  openSupporterURL = () => {\r\n    overwolf.utils.openStore({\r\n      page:overwolf.utils.enums.eStorePage.SubscriptionPage\r\n     })\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    const script = document.createElement(\"script\")\r\n    script.src = \"https://content.overwolf.com/libs/ads/latest/owads.min.js\"\r\n    script.async = true;\r\n    document.body.appendChild(script)\r\n\r\n    if (this.props.supporter.type === \"Checked\"){\r\n      var counter = 0\r\n      this.createAd(counter)\r\n    }\r\n    overwolf.windows.onStateChanged.removeListener(this.onWindowStateChanged.bind(this));\r\n    overwolf.windows.onStateChanged.addListener(this.onWindowStateChanged.bind(this))\r\n    //if ingame window listen for alt+tab\r\n    if ([\"ingame_full\"].includes(this.props.ad_name)){\r\n      overwolf.games.onGameInfoUpdated.removeListener(this.AltTabListener.bind(this));\r\n      overwolf.games.onGameInfoUpdated.addListener(this.AltTabListener.bind(this));\r\n    } \r\n  }\r\n\r\n  componentWillUnmount = () => {\r\n    if (this.owAd !== null){\r\n      this.owAd.removeAd()\r\n    }\r\n  }\r\n\r\n  //\r\n  render() {\r\n    //console.log(\"supporter status: \", this.props.supporter)\r\n    var ad_message = <div className=\"ad_message_nwmm\">Ads help support development and pay for server costs</div>\r\n    if(this.props.supporter_status === true){\r\n      ad_message = <div className=\"ad_message_nwmm\">Thanks for supporting New World MiniMap!</div>\r\n    }\r\n    return (\r\n      <div className=\"ad_space_container_nwmm\">\r\n        {ad_message}\r\n        <div className=\"ad_space_nwmm\" >\r\n          <img src=\"IconMouseNormal.png\" draggable = \"false\" className=\"ad_bg_nwmm\"/>\r\n          <div id={this.props.ad_name} className=\"ad_container_nwmm\"> </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","/* global overwolf */\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport Button from '@mui/material/Button';\r\nimport { styled } from '@mui/material/styles';\r\nimport TextField from '@mui/material/TextField';\r\nimport Box from '@mui/material/Box';\r\nimport {MdOpenInBrowser, MdOutlineLink, MdOutlineClose, MdPerson} from 'react-icons/md'\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\r\nimport { leaveGroup, joinGroup } from '../actions/group.js'\r\nimport { v4 as uuidv4, validate as uuidValidate } from 'uuid';\r\nimport { BsInfoCircle, BsRecord2 } from 'react-icons/bs'\r\nimport * as types from '../actions/types'\r\nimport classNames from \"classnames\";\r\nimport PlayerColours from '../common/constants/colours'\r\nimport WindowsService from '../common/services/windows-service'\r\n\r\nconst ShareButton = styled(Button)({\r\n  fontFamily: \"Poppins\",\r\n  fontSize: 12,\r\n  padding: '6px 20px',\r\n  margin: '6px',\r\n  border: '1px solid #808180',\r\n  color: \"#d6d7d5\",\r\n  lineHeight: 1.5,\r\n  transition: '0.3s cubic-bezier(.47,1.64,.41,.8)',\r\n  '&:hover': {\r\n    backgroundColor: '#434241',\r\n    borderColor: '#a6a7a6',\r\n    boxShadow: 'none',\r\n  },\r\n  '&:active': {\r\n    boxShadow: 'none',\r\n    backgroundColor: '#434241',\r\n    borderColor: '#a6a7a6',\r\n  },\r\n  '&:focus': {\r\n    borderColor: '#a6a7a6',\r\n    boxShadow: '0 0 0 0.2rem rgba(166, 167, 166,.5)',\r\n    outline: \"none\"\r\n  },\r\n  '&:disabled': {\r\n    color: \"#742624\",\r\n    borderColor: '#742624',\r\n    outline: \"none\"\r\n  },\r\n});\r\n\r\nconst LocationButton = styled(Button)({\r\n  fontFamily: \"Poppins\",\r\n  fontSize: 12,\r\n  padding: '6px 20px',\r\n  margin: '6px',\r\n  border: '1px solid #c2403c',\r\n  color: \"#c2403c\",\r\n  lineHeight: 1.5,\r\n  transition: '0.3s cubic-bezier(.47,1.64,.41,.8)',\r\n  '&:hover': {\r\n    backgroundColor: '#434241',\r\n    borderColor: '#c2403c',\r\n    boxShadow: 'none',\r\n  },\r\n  '&:active': {\r\n    boxShadow: 'none',\r\n    backgroundColor: '#434241',\r\n    borderColor: '#c2403c',\r\n  },\r\n  '&:focus': {\r\n    borderColor: '#c2403c',\r\n    boxShadow: '0 0 0 0.2rem rgba(194,64,60,.5)',\r\n    outline: \"none\"\r\n  },\r\n  '&:disabled': {\r\n    color: \"#742624\",\r\n    borderColor: '#742624',\r\n    outline: \"none\"\r\n  },\r\n});\r\n\r\nconst CssTextField = styled(TextField)({\r\n  fontFamily: \"Poppins\",\r\n  '& label.Mui-focused': {\r\n    color: '#c2403c',\r\n  },\r\n  '& .MuiInput-underline:after': {\r\n    borderBottomColor: '#c2403c',\r\n  },\r\n  '& .MuiOutlinedInput-root': {\r\n    '& fieldset': {\r\n      border: \"1px solid #808180\",\r\n    },\r\n    '&:hover fieldset': {\r\n      borderColor: '#c2403c',\r\n    },\r\n    '&.Mui-focused fieldset': {\r\n      borderColor: '#c2403c',\r\n    },\r\n  },\r\n  '& .MuiInputBase-input': {\r\n    color: \"#eeefed\",\r\n  },\r\n  '&  .MuiInputLabel-root': {\r\n    color: \"#d6d7d5\",\r\n  }\r\n});\r\n\r\n\r\nfunction BasicTextFields(joinText, handleJoinText) {\r\n  return (\r\n    <Box\r\n      component=\"form\"\r\n      sx={{\r\n        '& > :not(style)': { width: '20ch', },\r\n      }}\r\n      noValidate\r\n      autoComplete=\"off\"\r\n    >\r\n      <CssTextField id=\"size-input\" label=\"Join Code\" variant=\"outlined\" size=\"small\" type=\"text\"\r\n         value={joinText}\r\n         onChange={handleJoinText}\r\n      />\r\n    </Box>\r\n  );\r\n}\r\n\r\nclass ShareLinkButton extends Component {\r\n  constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n      open: false,\r\n        }\r\n    }\r\n\r\n\r\n  handleTooltipClose = () => {\r\n    this.setState({open: false});\r\n  };\r\n\r\n  handleTooltipOpen = () => {\r\n    this.setState({open: true});\r\n  };\r\n\r\n  buttonClick=()=> {\r\n    this.props.shareGroup()\r\n    this.handleTooltipOpen()\r\n  }\r\n\r\n  render (){\r\n    return (\r\n      <ClickAwayListener onClickAway={this.handleTooltipClose}>\r\n        <div>\r\n          <Tooltip\r\n            PopperProps={{\r\n              disablePortal: true,\r\n            }}\r\n            onClose={this.handleTooltipClose}\r\n            open={this.state.open}\r\n            disableFocusListener\r\n            disableHoverListener\r\n            disableTouchListener\r\n            title=\"Share Link Copied to Clipboard\"\r\n          >\r\n            <ShareButton variant=\"outlined\" startIcon={<MdOutlineLink/>} onClick={this.buttonClick}>Share</ShareButton>\r\n          </Tooltip>\r\n        </div>\r\n      </ClickAwayListener>\r\n    )\r\n  }\r\n\r\n}\r\n\r\n\r\nclass StreamLocation extends Component {\r\n  constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n      joinText: \"\",\r\n        }\r\n    }\r\n\r\n  handleJoinText = (event) => {\r\n    this.setState({joinText: this.parseCode(event.target.value)})\r\n  }\r\n\r\n  createGroup = () => {\r\n    let newGroupCode = uuidv4();\r\n    this.props.joinGroup(newGroupCode);\r\n    WindowsService.openBrowser(newGroupCode)\r\n  }\r\n\r\n  parseCode = (text) => {\r\n    if (uuidValidate(text)) {\r\n      return text;\r\n    }\r\n    const regex = /code=(.{36})/;\r\n    const match = text.match(regex);\r\n    if (match && uuidValidate(match[1])) {\r\n      return match[1]\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  joinGroup = () => {\r\n    if (this.state.joinText) {\r\n      this.props.joinGroup(this.state.joinText);\r\n    }\r\n    WindowsService.openBrowser(this.state.joinText)\r\n  }\r\n\r\n  leaveGroup = () => {\r\n    this.props.leaveGroup();\r\n  }\r\n\r\n  shareGroup = () => {\r\n    //add share group logic\r\n    var group_code = `https://newworldminimap.com/join?code=${this.props.group_code}`\r\n    if (typeof overwolf !== \"undefined\") {\r\n      overwolf.utils.placeOnClipboard(group_code)\r\n    } else {\r\n      navigator.clipboard.writeText(group_code)\r\n    }\r\n  }\r\n\r\n  trackPlayer = (id) => {\r\n    const store = overwolf.windows.getMainWindow().reduxStore;\r\n    store.dispatch({type: types.TRACK_PLAYER, payload: id})\r\n  }\r\n\r\n  StreamLocation = () => {\r\n    WindowsService.openBrowser()\r\n  }\r\n\r\n  openUrl = (url) => {\r\n    overwolf.utils.openUrlInDefaultBrowser(url)\r\n  }\r\n\r\n render(){\r\n  var sharelocation_content\r\n\r\n  if(this.props.group_code !== null){\r\n    let group_members = [];\r\n    var player_num = 0\r\n    for (let id in this.props.connectedPlayers) {\r\n      let { name: playerName, position: [x, y, _rotation] } = this.props.connectedPlayers[id]\r\n      var player_colour = PlayerColours[player_num]\r\n      var tracking_icon\r\n      var active = false\r\n      if((this.props.tracked_player === id) || ((this.props.tracked_player === \"\") && (this.props.playerName === playerName))){\r\n        active = true\r\n        tracking_icon = <BsRecord2 style={{marginRight: \"2px\", marginBottom: \"2px\", color: \"#c2403c\"}}/>\r\n      } else{\r\n        tracking_icon = <span style={{width: \"16px\"}}></span>\r\n      }\r\n      group_members.push(\r\n        <div className={classNames(\"ShareLocationPlayer\", {active: active})} >\r\n          {/* onClick = {() => {this.trackPlayer(id)}} */}\r\n          <span className=\"ShareLocationPlayerSpan\">{tracking_icon} <MdPerson style={{marginRight: \"2px\", marginBottom: \"2px\", color: player_colour}}/> {playerName}</span>\r\n          <span className=\"ShareLocationPlayerSpan\">x: {x}, y: {y}</span>\r\n        </div>\r\n      )\r\n      player_num += 1\r\n      if (player_num > PlayerColours.length -1){\r\n        player_num = 0\r\n      }\r\n    }\r\n\r\n    sharelocation_content = \r\n    <React.Fragment>\r\n      <div className=\"ShareLocationInfoRow\">\r\n        <span className=\"ShareLocationPlayerSpan\"><BsInfoCircle style={{fontSize: \"14px\", marginRight: \"3px\"}}/> Group size is limited to 5</span><span className=\"ShareLocationPlayerSpan\">Location Sharing is in beta and the service may go down </span>\r\n      </div>\r\n      <div className=\"ShareLocationRow\">\r\n          Group Controls\r\n          <div className=\"ShareLocationInput\">\r\n            <ShareLinkButton shareGroup={this.shareGroup.bind(this)} />\r\n            <LocationButton variant=\"outlined\" startIcon={<MdOutlineClose/>} onClick={this.leaveGroup}>Leave</LocationButton>\r\n          </div>\r\n        </div>\r\n        <div className=\"ShareLocationRow\">\r\n          Group Members\r\n          <div className=\"ShareLocationPlayerList\">\r\n            {group_members}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n  } else {\r\n    sharelocation_content = \r\n    <React.Fragment>\r\n      <div className=\"ShareLocationRow\">\r\n          Stream Location\r\n          <div className=\"ShareLocationInput\">\r\n            <LocationButton variant=\"outlined\" onClick={this.StreamLocation}><MdOpenInBrowser/> Start </LocationButton>\r\n          </div>\r\n          <div className=\"ShareLocationInfoRow\">\r\n            <span>[Beta] You can also stream to <span className=\"settingsHotkey\" onClick={() => {this.openUrl(\"https://www.newworld-map.com/#/\")}}>NewWorld-Map</span> or <span className=\"settingsHotkey\" onClick={() => {this.openUrl(\"https://mapgenie.io/new-world/maps/aeternum\")}}>MapGenie</span></span>\r\n          </div>\r\n        </div>\r\n        <div className=\"ShareLocationRow\">\r\n          Create a Stream Code\r\n          <div className=\"ShareLocationInput\">\r\n            <LocationButton variant=\"outlined\" onClick={this.createGroup}> Create </LocationButton>\r\n          </div>\r\n          <div className=\"ShareLocationInfoRow\">\r\n            For cross device streaming or sharing with friends\r\n          </div>\r\n        </div>\r\n        <div className=\"ShareLocationRow\">\r\n          Join a Stream Code\r\n          <div className=\"ShareLocationInput\">\r\n          {BasicTextFields(this.state.joinText, this.handleJoinText.bind(this))}\r\n          <LocationButton variant=\"outlined\" disabled={(this.state.joinText === \"\")} onClick={this.joinGroup}>Join</LocationButton>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"ShareLocationContainer\">\r\n      {sharelocation_content}\r\n    </div>\r\n  );\r\n }\r\n  \r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const { connectedPlayers, groupCode: group_code } = state.group\r\n  const { tracked_player, playerName } = state.game\r\n  return { connectedPlayers, group_code, tracked_player, playerName }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  joinGroup,\r\n  leaveGroup,\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(StreamLocation);\r\n","/* global overwolf */\r\n\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport WindowsService from '../../common/services/windows-service';\r\nimport DragService from '../../common/services/drag-service';\r\nimport MiniMap from '../../components/MiniMap.js'\r\nimport AdBox from '../../components/AdBox.js'\r\nimport {FaDiscord} from 'react-icons/fa'\r\nimport { VscChromeClose, VscChromeMaximize, VscChromeMinimize, VscChromeRestore } from \"react-icons/vsc\";\r\nimport {MdOutlineHelp} from 'react-icons/md'\r\nimport * as types from '../../actions/types';\r\nimport '../../common/style.css';\r\nimport Nodes from '../../data/nodes.json'\r\nimport Collapse from '@mui/material/Collapse';\r\nimport classNames from \"classnames\";\r\nimport Scrollbars from 'react-custom-scrollbars-2';\r\nimport Filters from '../../components/Filters'\r\nimport {MdOutlineChevronRight, MdOutlineExpandMore} from 'react-icons/md'\r\nimport StreamLocation from '../../components/StreamLocation'\r\nimport {RiSwapBoxLine} from 'react-icons/ri'\r\nimport Settings from '../settings/Settings'\r\n\r\nconst dropdown_icons = {}\r\ndropdown_icons[true] = <MdOutlineExpandMore className=\"SidebarRowIcon\"/>\r\ndropdown_icons[false] = <MdOutlineChevronRight className=\"SidebarRowIcon\"/>\r\n\r\nclass SecondScreen extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this._dragService = null;\r\n        this._window = null;\r\n        this._headerRef = React.createRef();\r\n\r\n        this.state = {\r\n            max: false,\r\n            open: 1,\r\n            settings: false,\r\n        }\r\n    }\r\n\r\n    toggle_open = (num) => {\r\n        if(this.state.open === num){\r\n          this.setState({open: 0})\r\n        } else {\r\n          this.setState({open: num})\r\n        }\r\n      }\r\n    \r\n      toggle_settings = () => {\r\n          this.setState({settings: !this.state.settings})\r\n      }\r\n      \r\n\r\n    componentDidMount() {\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            if (result.success){\r\n                this._dragService = new DragService(result.window, this._headerRef.current)\r\n                this._window = result.window\r\n                // if(!this.props.ingame){\r\n                    if ((result.window.width === 1200) && (result.window.height === 700)){\r\n                        //get monitor info\r\n                        var monitor_list = []\r\n                        var second_monitor=true\r\n                        overwolf.utils.getMonitorsList((res) => {\r\n                            if (res.success){\r\n                                console.log(\"monitor info: \", res.displays)\r\n                                monitor_list = res.displays \r\n                                if (res.displays.length == 1){\r\n                                    second_monitor=false\r\n                                }\r\n                                var new_width = 1200\r\n                                var new_height = 700\r\n                                var new_x = 0\r\n                                var new_y = 0\r\n                                var monitor_id = result.window.monitorId\r\n                                monitor_list.forEach(monitor => {\r\n                                    console.log(monitor_id)\r\n                                    console.log(monitor.id)\r\n                                    if (monitor.id === monitor_id){\r\n                                        if (monitor.width > 1700){\r\n                                            new_width = 1700\r\n                                        } else if (monitor.width > 1300){\r\n                                            new_width = 1300\r\n                                        }\r\n                                        new_height = parseInt(monitor.height*0.9-60)\r\n                                        new_x = parseInt((monitor.width-new_width)/2)\r\n                                        new_y = parseInt((monitor.height-new_height-60)/2)\r\n                                        overwolf.windows.changePosition(result.window.id, new_x, new_y)\r\n                                        overwolf.windows.changeSize({\"window_id\": result.window.id, \"width\":new_width, \"height\":new_height}, console.log)\r\n                                    }\r\n                                })\r\n                            }\r\n                        })\r\n                    }\r\n                // }\r\n            }\r\n        })\r\n\r\n        // Make window draggable\r\n    }\r\n\r\n    onCloseClicked = (event) => {\r\n        if (typeof this._window !== \"undefined\"){\r\n            overwolf.windows.close(this._window.id, console.log);\r\n        }\r\n    }\r\n\r\n    onSettingsClicked(event) {\r\n        WindowsService.restore(WindowNames.SETTINGS);\r\n    }\r\n\r\n    onMinClicked = (event) => {\r\n        if (typeof this._window !== \"undefined\"){\r\n            overwolf.windows.minimize(this._window.id);\r\n        }\r\n    }\r\n\r\n    onMaxClicked = (event) => {\r\n        if (typeof this._window !== \"undefined\"){\r\n            overwolf.windows.maximize(this._window.id);\r\n            this.setState({max: true})\r\n        }\r\n    }\r\n\r\n    onRestoreClicked = (event) => {\r\n        if (typeof this._window !== \"undefined\"){\r\n            overwolf.windows.restore(this._window.id);\r\n            this.setState({max: false})\r\n        }\r\n    }\r\n\r\n    swapWindow = () => {\r\n        WindowsService.swapMap(this.props.ingame)\r\n        //remember preferred mode\r\n        localStorage.setItem(\"NWMM_second_monitor\", this.props.ingame)\r\n    }\r\n\r\n    updateEnabled = (new_enabled) => {\r\n        const store = overwolf.windows.getMainWindow().reduxStore;\r\n        // this.setState({enabled: new_enabled})\r\n        store.dispatch({type: types.ENABLED_MARKERS, payload: new_enabled})\r\n        localStorage.setItem(\"NWMM_markers2\", JSON.stringify(new_enabled))\r\n      }\r\n\r\n  render() {\r\n\r\n    var resize_button\r\n    if (this.state.max){\r\n        resize_button =                         \r\n        <button className=\"icon window-control\" id=\"resizeButton\" onClick={this.onRestoreClicked}>\r\n            <VscChromeRestore style={{height: \"20px\"}}/>\r\n        </button>\r\n    } else {\r\n        resize_button = \r\n        <button className=\"icon window-control\" id=\"resizeButton\" onClick={this.onMaxClicked}>\r\n            <VscChromeMaximize style={{height: \"20px\"}}/>\r\n        </button>\r\n    }\r\n    var hotkey = \"\"\r\n    if(this.props.showhide2 !==\"\"){\r\n        hotkey = <span>Show/Hide: <a style={{textDecoration: \"none\"}} href=\"overwolf://settings/games-overlay?hotkey=nwmm_showhide2&gameId=21816\"><span className=\"settingsHotkey\">{this.props.showhide2}</span></a></span>            \r\n    }\r\n\r\n    var ad_name = \"second_screen\"\r\n    if(this.props.ingame){\r\n        ad_name = \"ingame_full\"\r\n    }\r\n    var swap_screen\r\n    if(this.props.in_game === true){\r\n        swap_screen =             \r\n        <button className=\"icon window-control\" id=\"switchButton\" onClick={this.swapWindow}>\r\n            <RiSwapBoxLine style={{height: \"20px\"}}/>\r\n        </button>\r\n    }\r\n    var settings\r\n    if(this.state.settings === true){\r\n        settings = <div className=\"SettingsAbsoluteContainer\"><div className=\"settings\"><Settings second_screen = {true} toggle_settings={this.toggle_settings.bind(this)}></Settings></div></div>\r\n    }\r\n    // console.log('In-Game window redux state', this.props.state)\r\n    // const store = overwolf.windows.getMainWindow().reduxStore\r\n    return (\r\n    <div className=\"SecondScreenContainer\" >\r\n        <header className=\"app-header\" ref={this._headerRef}>\r\n          <div className=\"app-icon\">\r\n            <img src=\"IconMouseNormal.png\" style={{height: 30, width: 30}} draggable=\"false\"/>\r\n            <span style={{fontSize: \"16px\", color: \"#efefef\"}}>New World MiniMap</span>\r\n          </div>\r\n          <div className=\"hotkey-header\">{hotkey}</div>\r\n          <div className=\"window-controls-group\">\r\n          <button className=\"icon window-control discord\" id=\"discordButton\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}} >\r\n              <FaDiscord style={{height: \"18px\"}}/>\r\n            </button>\r\n            <button className=\"icon window-control help\" id=\"helpButton\" onClick={() => {this.openURL(\"https://www.newworldminimap.com/help\")}} >\r\n              <MdOutlineHelp style={{height: \"20px\"}}/>\r\n            </button>\r\n            {swap_screen}\r\n            <button className=\"icon window-control\" id=\"minButton\" onClick={this.onMinClicked}>\r\n                <VscChromeMinimize style={{height: \"20px\"}}/>\r\n            </button>\r\n            {resize_button}\r\n            <button className=\"icon window-control window-control-close\" id=\"closeButton\" onClick={this.onCloseClicked}>\r\n              <VscChromeClose style={{height: \"20px\"}}/>\r\n            </button>\r\n          </div>\r\n        </header>\r\n        <div className=\"MainContainer\">\r\n          <div className=\"Sidebar\">\r\n            <div className=\"SidebarTop\">\r\n              <div className={classNames(\"SidebarRow\", {active: (this.state.open === 1)})} onClick={() => {this.toggle_open(1)}}>\r\n                Filters\r\n                {dropdown_icons[(this.state.open === 1)]}\r\n              </div>    \r\n              <Scrollbars autoHeight autoHeightMin=\"1px\" autoHeightMax=\"100%\">\r\n                <Collapse in={(this.state.open === 1)}>\r\n                    <Filters Nodes={Nodes} updateEnabled={this.updateEnabled.bind(this)} enabled = {this.props.enabled_markers}/>\r\n                </Collapse>\r\n              </Scrollbars>\r\n              {/* <div className={classNames(\"SidebarRow\", {active: (this.state.open === 2)})} onClick={() => {this.toggle_open(2)}}>\r\n                Find a Resource\r\n              </div>\r\n              <Scrollbars autoHeight autoHeightMin=\"1px\" autoHeightMax=\"100%\">\r\n                <Collapse in={(this.state.open === 2)}>\r\n                </Collapse>\r\n              </Scrollbars> */}\r\n              <div className={classNames(\"SidebarRow\", {active: (this.state.open === 2)})} onClick={() => {this.toggle_open(2)}}>\r\n                Stream Location\r\n                {dropdown_icons[(this.state.open === 2)]}\r\n              </div>\r\n              <Scrollbars autoHeight autoHeightMin=\"1px\" autoHeightMax=\"100%\">\r\n                <Collapse in={(this.state.open === 2)}>\r\n                    <StreamLocation />\r\n                </Collapse>\r\n              </Scrollbars>\r\n              <div className={classNames(\"SidebarRow\", {active: (this.state.open === 3)})} style={{color: \"#a8a8a8\"}}>       \r\n                Party Members \r\n                {dropdown_icons[(this.state.open === 3)]}\r\n                <span className=\"ShareLocationInfoRow\"> Coming soon!</span>\r\n              </div>\r\n              <div className={classNames(\"SidebarRow\", {active: (this.state.open === 4)})} style={{color: \"#a8a8a8\"}}>       \r\n                Quests \r\n                {dropdown_icons[(this.state.open === 4)]}\r\n                <span className=\"ShareLocationInfoRow\"> Coming soon!</span>\r\n              </div>\r\n            </div>\r\n            <AdBox ad_name={ad_name} supporter={this.props.supporter}/>\r\n          </div>\r\n          <div className=\"FullscreenMapContainer\">\r\n            <MiniMap second_screen = {true} toggle_settings={this.toggle_settings.bind(this)} />\r\n          </div>\r\n        </div>\r\n        {settings}\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state /*, ownProps*/) => {\r\n    const { supporter, enabled_markers, showhide2, in_game } = state.game\r\n    return { supporter, enabled_markers, showhide2, in_game }\r\n};\r\n\r\nexport default connect(mapStateToProps)(SecondScreen);\r\n","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\n// import HotkeysService from '../../common/services/hotkeys-service';\r\nimport DragService from '../../common/services/drag-service';\r\nimport { connect } from 'react-redux';\r\nimport '../../common/style.css';\r\nimport {FaDiscord} from 'react-icons/fa'\r\nimport {IoClose} from 'react-icons/io5'\r\nimport {MdOutlineHelp, MdOpenInBrowser} from 'react-icons/md'\r\nimport Slider from '@mui/material/Slider';\r\nimport WindowNames from '../../common/constants/window-names';\r\nimport * as types from '../../actions/types';\r\nimport Radio from '@mui/material/Radio';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport FormControl from '@mui/material/FormControl';\r\n\r\nconst mapStateToProps = (state /*, ownProps*/) => {\r\n    return {\r\n        state\r\n    }\r\n};\r\n\r\n\r\nconst ZoomMarks = [\r\n  {\r\n    value: 2,\r\n    label: 'Zoomed In',\r\n  },\r\n  {\r\n    value: 3,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 4,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 5,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 6,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 7,\r\n    label: '',\r\n  },\r\n  {\r\n    value: 8,\r\n    label: 'Zoomed Out',\r\n  },\r\n];\r\n\r\nconst SizeMarks = [\r\n  {\r\n    value: 200,\r\n    label: 'Small',\r\n  },\r\n  {\r\n    value: 250,\r\n    label: 'Medium',\r\n  },\r\n  {\r\n    value: 300,\r\n    label: 'Large',\r\n  },\r\n];\r\n\r\nfunction SizeSlider(SizeChange, SizeUpdate, default_size) {\r\n  return (\r\n      <Slider\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={default_size}\r\n        value={default_size}\r\n        step={null}\r\n        marks={SizeMarks}\r\n        min={200}\r\n        max={300}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {SizeChange(value)}}\r\n        onChange ={(e, value) => {SizeUpdate(value)}}\r\n      />\r\n  );\r\n}\r\n\r\nfunction ZoomSlider(name, zoomStart, ZoomChange) {\r\n  return (\r\n      <Slider\r\n        aria-label=\"Restricted values\"\r\n        defaultValue={zoomStart}\r\n        step={null}\r\n        marks={ZoomMarks}\r\n        min={2}\r\n        max={8}\r\n        sx={{\r\n          color: '#c2403c',\r\n          '& .MuiSlider-thumb': {\r\n            '&:hover, &.Mui-focusVisible': {\r\n              boxShadow: `0px 0px 0px 8px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n            '&.Mui-active': {\r\n              boxShadow: `0px 0px 0px 14px rgba(194, 64, 60, 0.19)`,\r\n            },\r\n          },\r\n          '& .MuiSlider-markLabel': {\r\n            color: \"#d6d7d5\",\r\n            fontSize: \"10px\",\r\n          }\r\n        }}\r\n        onChangeCommitted={(e, value) => {ZoomChange(value, name)}}\r\n      />\r\n  );\r\n}\r\n\r\nclass Desktop extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this._dragService = null;\r\n        this._headerRef = React.createRef();\r\n\r\n        this.state = {\r\n            showhideText: '',\r\n            zoomInText: '',\r\n            zoomOutText: '',\r\n            default_size: 250, \r\n            version: \"[calculating]\",\r\n        };\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps, nextState) => {\r\n        var update = false\r\n        if (nextState !== this.state){\r\n            update = true\r\n        }\r\n        if (this.props.state.showhide != nextProps.state.game.showhide){\r\n            update = true\r\n            //this.setState({showhideText: nextProps.state.game.showhide})\r\n        } \r\n        if (this.props.state.zoom_in != nextProps.state.game.zoom_in){\r\n            update = true\r\n            //this.setState({zoomInText: nextProps.state.game.zoom_in})\r\n        } \r\n        if (this.props.state.zoom_out != nextProps.state.game.zoom_out){\r\n            update = true\r\n            //this.setState({zoomOutText: nextProps.state.game.zoom_out})\r\n        }\r\n        return update\r\n    }\r\n\r\n    openURL = (url) => {\r\n        overwolf.utils.openUrlInDefaultBrowser(url)\r\n    }\r\n\r\n     componentDidMount() {\r\n        // Make window draggable\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            this._dragService = new DragService(result.window, this._headerRef.current)\r\n        })\r\n        const zoomInText = this.props.state.game.zoom_in\r\n        const zoomOutText = this.props.state.game.zoom_out\r\n        const showhideText = this.props.state.game.showhide\r\n        \r\n        this.setState({zoomInText: zoomInText, zoomOutText: zoomOutText, showhideText: showhideText})\r\n\r\n        var default_size = localStorage.getItem(\"NWMM_size\")\r\n        if (default_size !== null){\r\n            this.setState({default_size: parseInt(default_size)})\r\n        }\r\n        overwolf.extensions.current.getManifest(app => {\r\n            if (app.success === true) {\r\n                this.setState({version: app.meta.version})\r\n            }\r\n        }) \r\n    }\r\n    \r\n    onCloseClicked(event) {\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            if (result.success == true){\r\n                overwolf.windows.close(result.window.id, ()=> {console.log(\"settings closed\")})\r\n            }\r\n        })\r\n    }\r\n    \r\n    updateHotkey(name, value) {\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n    SizeUpdate = (value) => {\r\n        if (value !== this.state.default_size){\r\n            this.setState({default_size: value})\r\n        }\r\n    }\r\n\r\n    SizeChange = (value) => {\r\n        overwolf.windows.obtainDeclaredWindow(WindowNames.IN_GAME, res => {\r\n            if (res.success === true){\r\n                var window_id = res.window.id\r\n                var change_size_params = {\r\n                    \"window_id\":window_id,\r\n                    \"width\":value,\r\n                    \"height\":value,\r\n                    \"auto_dpi_resize\":true //relevant only for native windows\r\n                  }\r\n                overwolf.windows.changeSize(change_size_params ,console.log)\r\n            }\r\n        })\r\n        localStorage.setItem(\"NWMM_size\", value)\r\n      }\r\n    \r\n      ZoomChange = (value, type) => {\r\n        if (type==\"Town\"){\r\n          this.setState({TownZoom: value})\r\n        } else {\r\n            this.setState({WorldZoom: value})\r\n        }\r\n      }\r\n    \r\n     render(){\r\n        // console.log('Settings window redux state', this.props.state)\r\n      return (\r\n            <div className=\"settings\" >\r\n              <header className=\"app-header\" ref={this._headerRef}>\r\n                <div className=\"app-icon\">\r\n                  <img src=\"IconMouseNormal.png\" style={{height: 30, width: 30}} draggable=\"false\"/>\r\n                  <span style={{fontSize: \"18px\"}}>New World MiniMap - Update</span>\r\n                </div>\r\n                <div className=\"window-controls-group\">\r\n                <button className=\"icon window-control discord\" id=\"discordButton\" onClick={() => {this.openURL(\"https://discord.gg/VhH7mu2SXt\")}} >\r\n                    <FaDiscord style={{height: \"18px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control help\" id=\"helpButton\" onClick={() => {this.openURL(\"https://www.newworldminimap.com/help\")}} >\r\n                    <MdOutlineHelp style={{height: \"20px\"}}/>\r\n                  </button>\r\n                  <button className=\"icon window-control window-control-close\" id=\"closeButton\" onClick={this.onCloseClicked}>\r\n                    <IoClose/>\r\n                  </button>\r\n                </div>\r\n              </header>\r\n              <div className=\"notificationContent\">\r\n                <div className=\"settingsSection\" style={{marginBottom: \"2px\"}}>\r\n                  <div className=\"settingsHeader\">\r\n                    Update\r\n                  </div>\r\n                  <div className=\"settingsAbout\">\r\n                    <div className=\"settingsAboutRow\">In order to comply with Amazon's updated <span className=\"settingsHotkey\" onClick={() => {this.openURL(\"https://forums.newworld.com/t/dev-blog-mini-map/535888\")}}>Terms of Service</span> for third party addons, we have removed resources from the minimap.</div>\r\n                    <div className=\"settingsAboutRow\">Don't despair! We've added the ability to send your player marker into a browser map, where you can view the full set of resource locations. Simply press the <span className=\"settingsHotkey\"><MdOpenInBrowser/> Stream Location</span> button to set this up.</div>\r\n                    <div className=\"settingsAboutRow\">Thanks for sticking with us through this uncertainty and stay tuned as we have more stuff planned!</div>\r\n                    <div className=\"settingsAboutRow\" style={{marginTop: \"8px\", color: \"#a8a8a8\"}}>&copy; {new Date().getFullYear()} NewWorldMiniMap.com New World MiniMap is not affiliated with New World or Amazon Game Studios in any way. App version {this.state.version}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Desktop);","/*global overwolf*/\r\n\r\nimport React, { Component } from 'react';\r\nimport Background from './windows/background/Background';\r\nimport Settings from './windows/settings/Settings';\r\nimport InGame from './windows/in-game/InGame';\r\nimport Desktop from './windows/desktop/Desktop';\r\nimport SecondScreen from './windows/second_screen/SecondScreen'\r\nimport Notification from './windows/notification/Notification'\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            currentWindowName: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        overwolf.windows.getCurrentWindow(result => {\r\n            this.setState({\r\n                currentWindowName: result.window.name\r\n            });\r\n        });\r\n    }\r\n\r\n  render() {\r\n        const windowName = this.state.currentWindowName;\r\n        let window;\r\n        let body = document.getElementsByTagName('body')[0]\r\n        switch (windowName) {\r\n            case 'background':\r\n                window = <Background />\r\n                break;\r\n            case 'settings':\r\n                window = <Settings />\r\n                body.className = 'settings'\r\n                break;\r\n            case 'ingame':\r\n                window = <InGame />\r\n                body.className = 'in-game'\r\n                break;\r\n            case 'desktop':\r\n                window = <Desktop />\r\n                body.className = 'settings'\r\n                break;\r\n            case 'second_screen':\r\n                window = <SecondScreen ingame={false}/>\r\n                body.className = 'settings'\r\n                break;\r\n            case 'ingame_full':\r\n                window = <SecondScreen ingame={true}/>\r\n                body.className = 'settings'\r\n                break;\r\n            case 'notification':\r\n                window = <Notification/>\r\n                body.className = 'settings'\r\n                break;\r\n        }\r\n\r\n    return (\r\n      <div className=\"App\">\r\n                {window}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","/*global overwolf*/\r\n\r\nimport React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\n// import './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst store = overwolf.windows.getMainWindow().reduxStore;\r\n\r\nrender(<Provider store={store}><App /></Provider>, document.getElementById('root'));\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}